(self.webpackChunkweb_app=self.webpackChunkweb_app||[]).push([[584],{3584:(t,e,i)=>{"use strict";i.r(e),i.d(e,{OperatorModule:()=>Fe});var n=i(8583),o=i(5987),r=i(5149),a=i(7716),s=i(8792),c=i(1317),d=i(2522),l=i(1095),g=i(6627),u=i(3935),Z=i(3017),p=i(1769),m=i(7746);let h=(()=>{class t{constructor(t,e,i){this.repoService=t,this.tokenStorage=e,this.router=i,this._userInformation="api/user/",this.profile_pic="",this._user_id=window.sessionStorage.getItem("user_id"),this.getUser=()=>{this.repoService.getData(`${this._userInformation}${this._user_id}/`).toPromise().then(t=>{this.user=t})},this.user=new r.n}ngOnInit(){this.getUser()}cerrarSesion(){this.tokenStorage.signOut(),this.router.navigate(["/login"])}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(s.b),a.Y36(c.i),a.Y36(o.F0))},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-operator"]],decls:71,vars:6,consts:[["id","logo"],["id","details"],["src","https://despachomotorizado.pythonanywhere.com/media/images/icon/Logo-original.png","alt","Card image cap",1,"card-img-top"],["mat-icon-button","","aria-label","Example icon-button with menu icon",1,"example-icon",3,"click"],[1,"example-spacer"],["mat-icon-button","","aria-label","Example icon-button with heart icon",1,"example-icon","favorite-icon"],[1,"other-spacer"],["mat-icon-button","","aria-label","Example icon-button with a menu",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"click"],["mat-menu-item","","disabled",""],["opened","","mode","side",1,"mat-elevation-z8"],["sidenav",""],[1,"avatar","mat-elevation-z8",3,"src"],[1,"name"],[1,"designation"],["dense",""],["mat-button","","routerLink","/listlocals",1,"menu-button"],["mat-button","","routerLink","/order",1,"menu-button"],["mat-button","","routerLink","/motorizados",1,"menu-button"],["mat-button","","routerLink","/customersDetails",1,"menu-button"],["mat-button","",1,"menu-button"],[1,"content","mat-elevation-z8"]],template:function(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"mat-toolbar"),a.TgZ(1,"div",0),a.TgZ(2,"div",1),a._UZ(3,"img",2),a.qZA(),a.qZA(),a.TgZ(4,"button",3),a.NdJ("click",function(){return a.CHM(t),a.MAs(34).toggle()}),a.TgZ(5,"mat-icon"),a._uU(6,"menu"),a.qZA(),a.qZA(),a._UZ(7,"span",4),a.TgZ(8,"button",5),a.TgZ(9,"mat-icon"),a._uU(10,"notifications"),a.qZA(),a.qZA(),a.TgZ(11,"mat-icon"),a._uU(12,"account_circle"),a.qZA(),a._UZ(13,"span",6),a.TgZ(14,"div"),a.TgZ(15,"span"),a._uU(16),a.qZA(),a.qZA(),a.TgZ(17,"button",7),a.TgZ(18,"mat-icon"),a._uU(19,"arrow_drop_down"),a.qZA(),a.qZA(),a.TgZ(20,"mat-menu",null,8),a.TgZ(22,"button",9),a.NdJ("click",function(){return e.cerrarSesion()}),a.TgZ(23,"mat-icon"),a._uU(24,"exit_to_app"),a.qZA(),a.TgZ(25,"span"),a._uU(26,"Cerrar sesi\xf3n"),a.qZA(),a.qZA(),a.TgZ(27,"button",10),a.TgZ(28,"mat-icon"),a._uU(29,"more_horiz"),a.qZA(),a.TgZ(30,"span"),a._uU(31,"M\xe1s"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(32,"mat-sidenav-container"),a.TgZ(33,"mat-sidenav",11,12),a._UZ(35,"img",13),a.TgZ(36,"h4",14),a._uU(37),a.qZA(),a.TgZ(38,"p",15),a._uU(39,"Operador"),a.qZA(),a._UZ(40,"mat-divider"),a.TgZ(41,"mat-nav-list",16),a.TgZ(42,"button",17),a.TgZ(43,"mat-icon"),a._uU(44,"home"),a.qZA(),a.TgZ(45,"span"),a._uU(46,"Locales"),a.qZA(),a.qZA(),a.TgZ(47,"button",18),a.TgZ(48,"mat-icon"),a._uU(49,"receipt"),a.qZA(),a.TgZ(50,"span"),a._uU(51,"Pedidos"),a.qZA(),a.qZA(),a.TgZ(52,"button",19),a.TgZ(53,"mat-icon"),a._uU(54,"local_taxi"),a.qZA(),a.TgZ(55,"span"),a._uU(56,"Motorizados"),a.qZA(),a.qZA(),a.TgZ(57,"button",20),a.TgZ(58,"mat-icon"),a._uU(59,"people"),a.qZA(),a.TgZ(60,"span"),a._uU(61,"Clientes"),a.qZA(),a.qZA(),a._UZ(62,"mat-divider"),a.TgZ(63,"button",21),a.TgZ(64,"mat-icon"),a._uU(65,"help"),a.qZA(),a.TgZ(66,"span"),a._uU(67,"Ayuda"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(68,"mat-sidenav-content"),a.TgZ(69,"div",22),a._UZ(70,"router-outlet"),a.qZA(),a.qZA(),a.qZA()}if(2&t){const t=a.MAs(21);a.xp6(16),a.AsE("",e.user.first_name," ",e.user.last_name,""),a.xp6(1),a.Q6J("matMenuTriggerFor",t),a.xp6(18),a.s9C("src",e.user.profile_pic,a.LSH),a.xp6(2),a.AsE("",e.user.first_name," ",e.user.last_name,"")}},directives:[d.Ye,l.lW,g.Hw,u.p6,u.VK,u.OP,Z.TM,Z.JX,p.d,m.Hk,o.rH,Z.Rh,o.lC],styles:["mat-toolbar[_ngcontent-%COMP%]{background:#004a9f;color:#fff}mat-sidenav[_ngcontent-%COMP%]{margin:16px;width:250px;border-right:none;background:#832e6b;color:#fff;border-radius:10px;padding:16px;text-align:center}.content[_ngcontent-%COMP%]{min-height:calc(100vh - 98px);height:auto;border-radius:10px;margin:16px 16px 16px 32px;display:flex;justify-content:center;font-size:2rem;background-color:#d3d3d3}mat-sidenav-container[_ngcontent-%COMP%]{height:calc(100vh - 65px)}.example-spacer[_ngcontent-%COMP%]{flex:1 1 auto}mat-toolbar[_ngcontent-%COMP%]{background:#fff;color:#000}#logo[_ngcontent-%COMP%]{background-color:#832e6b;color:#fff;text-align:center;padding:15px;border:25px 75px;width:250px}.other-spacer[_ngcontent-%COMP%]{padding:1px}#details[_ngcontent-%COMP%]{text-align:center;padding:15px;border:25px 75px;width:230px}mat-sidenav-container[_ngcontent-%COMP%]{overflow:hidden!important}.menu-button[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;justify-content:flex-start;font-size:1rem}.avatar[_ngcontent-%COMP%]{margin-top:16px;width:100px;height:100px;border-radius:50%}.name[_ngcontent-%COMP%]{margin-top:8px;font-weight:400}.designation[_ngcontent-%COMP%]{margin-top:2px;font-size:.7rem;color:#d3d3d3}mat-divider[_ngcontent-%COMP%]{margin-top:16px;margin-bottom:16px;background-color:#ffffff80}"]}),t})();var _=i(5939),f=i(2091),A=i(9517);let T=(()=>{class t{constructor(){this._orderList=[]}saveOrder(t){this._order=t}saveOrderList(t){this._orderList=t}getOrder(){return this._order}getOrderList(){return this._orderList}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=a.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var q=i(7023);function b(t,e){1&t&&(a.TgZ(0,"th",15),a._uU(1," ID "),a.qZA())}function U(t,e){if(1&t&&(a.TgZ(0,"td",16),a._uU(1),a.qZA()),2&t){const t=e.$implicit;a.xp6(1),a.hij("",t.id," ")}}function x(t,e){1&t&&(a.TgZ(0,"th",15),a._uU(1," Restaurante "),a.qZA())}function C(t,e){if(1&t&&(a.TgZ(0,"td",16),a._uU(1),a.qZA()),2&t){const t=e.$implicit;a.xp6(1),a.hij(" ",t.local.name," ")}}function v(t,e){1&t&&(a.TgZ(0,"th",15),a._uU(1," Ubicaci\xf3n del restaurante "),a.qZA())}function O(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"td",16),a._uU(1),a.TgZ(2,"button",17),a.NdJ("click",function(){const e=a.CHM(t).$implicit,i=a.oxw(),n=a.MAs(23);return i.openMap(n,e.local.location_id.longitude,e.local.location_id.latitude)}),a.TgZ(3,"mat-icon",18),a._uU(4,"location_on"),a.qZA(),a.qZA(),a.qZA()}if(2&t){const t=e.$implicit;a.xp6(1),a.hij(" ",t.local.location_id.reference," ")}}function M(t,e){1&t&&(a.TgZ(0,"th",15),a._uU(1," Ubicaci\xf3n de destino "),a.qZA())}function y(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"td",16),a._uU(1),a.TgZ(2,"button",19),a.NdJ("click",function(){const e=a.CHM(t).$implicit,i=a.oxw(),n=a.MAs(23);return i.openMap(n,e.destiny_loc.longitude,e.destiny_loc.latitude)}),a.TgZ(3,"mat-icon",18),a._uU(4,"location_on"),a.qZA(),a.qZA(),a.qZA()}if(2&t){const t=e.$implicit;a.xp6(1),a.hij(" ",t.destiny_loc.reference," ")}}function w(t,e){1&t&&(a.TgZ(0,"th",15),a._uU(1," M\xe1s "),a.qZA())}function I(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"td",16),a.TgZ(1,"button",20),a.NdJ("click",function(){const e=a.CHM(t).$implicit,i=a.oxw(),n=a.MAs(25);return i.open(n,e.id)}),a.TgZ(2,"mat-icon",18),a._uU(3,"reorder"),a.qZA(),a.qZA(),a.qZA()}}function P(t,e){1&t&&(a.TgZ(0,"th",15),a._uU(1," Asignaci\xf3n "),a.qZA())}function D(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"td",16),a.TgZ(1,"button",21),a.NdJ("click",function(){const e=a.CHM(t).$implicit;return a.oxw().redirectToAsign(e)}),a.TgZ(2,"mat-icon",18),a._uU(3,"library_add"),a.qZA(),a.qZA(),a.qZA()}}function k(t,e){1&t&&a._UZ(0,"tr",22)}function S(t,e){1&t&&a._UZ(0,"tr",23)}function N(t,e){1&t&&(a.TgZ(0,"div",24),a._uU(1,"\nNo hay pedidos para asignar\n"),a.qZA())}function j(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"div",25),a.TgZ(1,"h4",26),a._uU(2,"Mapa"),a.qZA(),a.TgZ(3,"button",27),a.NdJ("click",function(){return a.CHM(t).$implicit.dismiss("Cross click")}),a.TgZ(4,"span",28),a._uU(5,"\xd7"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(6,"div",29),a.TgZ(7,"agm-map",30),a._UZ(8,"agm-marker",31),a.qZA(),a.qZA()}if(2&t){const t=a.oxw();a.xp6(7),a.Q6J("usePanning",!0)("latitude",t.lat)("longitude",t.lng)("zoom",12),a.xp6(1),a.Q6J("latitude",t.lat)("longitude",t.lng)("markerDraggable",!0)}}function z(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"div",25),a.TgZ(1,"h4",26),a._uU(2,"Info del pedido"),a.qZA(),a.TgZ(3,"button",27),a.NdJ("click",function(){return a.CHM(t).$implicit.dismiss("Cross click")}),a.TgZ(4,"span",28),a._uU(5,"\xd7"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(6,"div",29),a.TgZ(7,"p"),a._uU(8),a.qZA(),a.TgZ(9,"div",32),a.TgZ(10,"div",33),a.TgZ(11,"h5"),a.TgZ(12,"b"),a._uU(13,"Datos de la empresa: "),a.qZA(),a.qZA(),a.TgZ(14,"span"),a.TgZ(15,"b"),a._uU(16,"Nombre:"),a.qZA(),a._uU(17),a.qZA(),a.TgZ(18,"span"),a.TgZ(19,"b"),a._uU(20,"Ubicaci\xf3n:"),a.qZA(),a._uU(21),a.qZA(),a.TgZ(22,"span"),a.TgZ(23,"b"),a._uU(24,"Email:"),a.qZA(),a._uU(25),a.qZA(),a.TgZ(26,"span"),a.TgZ(27,"b"),a._uU(28,"Fecha del pedido:"),a.qZA(),a._uU(29),a.qZA(),a.TgZ(30,"span"),a.TgZ(31,"b"),a._uU(32,"Hora del pedido:"),a.qZA(),a._uU(33),a.qZA(),a.TgZ(34,"span"),a.TgZ(35,"b"),a._uU(36,"RUC:"),a.qZA(),a._uU(37),a.qZA(),a.TgZ(38,"span"),a.TgZ(39,"b"),a._uU(40,"Pago tipo:"),a.qZA(),a._uU(41),a.qZA(),a.TgZ(42,"span"),a.TgZ(43,"b"),a._uU(44,"Precio total:"),a.qZA(),a._uU(45),a.qZA(),a.qZA(),a.TgZ(46,"div",33),a.TgZ(47,"h5"),a.TgZ(48,"b"),a._uU(49,"Datos del cliente: "),a.qZA(),a.qZA(),a.TgZ(50,"span"),a.TgZ(51,"b"),a._uU(52,"ID del pedido:"),a.qZA(),a._uU(53),a.qZA(),a.TgZ(54,"span"),a.TgZ(55,"b"),a._uU(56,"Ubicaci\xf3n:"),a.qZA(),a._uU(57),a.qZA(),a.TgZ(58,"span"),a.TgZ(59,"b"),a._uU(60,"Descripci\xf3n:"),a.qZA(),a._uU(61),a.qZA(),a.TgZ(62,"span"),a.TgZ(63,"b"),a._uU(64,"Cliente:"),a.qZA(),a._uU(65),a.qZA(),a.TgZ(66,"span"),a.TgZ(67,"b"),a._uU(68,"C\xe9dula:"),a.qZA(),a._uU(69),a.qZA(),a.TgZ(70,"span"),a.TgZ(71,"b"),a._uU(72,"Precio del pedido:"),a.qZA(),a._uU(73),a.qZA(),a.TgZ(74,"span"),a.TgZ(75,"b"),a._uU(76,"Precio de env\xedo:"),a.qZA(),a._uU(77),a.qZA(),a.qZA(),a.qZA(),a.qZA()}if(2&t){const t=a.oxw();a.xp6(8),a.hij("ID pedido ",t.orderInfo.id,""),a.xp6(9),a.hij(" ",t.orderInfo.local.name,""),a.xp6(4),a.hij(" ",t.orderInfo.local.location_id.reference,""),a.xp6(4),a.hij(" ",t.orderInfo.local.email,""),a.xp6(4),a.hij(" ",t.orderInfo.start_time.slice(0,10),""),a.xp6(4),a.hij(" ",t.orderInfo.start_time.slice(11,19),""),a.xp6(4),a.hij(" ",t.orderInfo.local.ruc,""),a.xp6(4),a.hij(" ",t.orderInfo.is_paid?"Tarjeta":"Efectivo",""),a.xp6(4),a.hij(" $",t.orderInfo.price+t.orderInfo.delivery_price,""),a.xp6(8),a.hij(" ",t.orderInfo.id,""),a.xp6(4),a.hij(" ",t.orderInfo.destiny_loc.reference,""),a.xp6(4),a.hij(" ",t.orderInfo.details,""),a.xp6(4),a.AsE(" ",t.orderInfo.client.name," ",t.orderInfo.client.apellido,""),a.xp6(4),a.hij(" ",t.orderInfo.client.id_number,""),a.xp6(4),a.hij(" $",t.orderInfo.price,""),a.xp6(4),a.hij(" $",null!=t.orderInfo.delivery_price?t.orderInfo.delivery_price:0,"")}}let Y=(()=>{class t{constructor(t,e,i){this.modalService=t,this.repoService=e,this.orderService=i,this.lat=-2.2175001,this.lng=-79.9092901,this.closeResult="",this.displayedColumns=["Id","restaurante","ubicacion","destino","info","asignar"],this.dataSource=new f.by,this.dataonHold=new f.by,this.getOrder=(t,e)=>{this.repoService.getData("api/orders/"+t+"/").toPromise().then(t=>{this.orderInfo=t,this.modalService.open(e,{ariaLabelledBy:"modal-basic-title"}).result.then(t=>{this.closeResult=`Closed with: ${t}`},t=>{this.closeResult=`Dismissed ${this.getDismissReason(t)}`})})},this.getAllOrders=()=>{this.repoService.getData("api/orders/").toPromise().then(t=>{this.dataSource.data=t,this.orderService.saveOrderList(t);const e=[];this.dataSource.data.forEach((t,i)=>{1===t.state&&e.push(t)}),this.dataonHold=new f.by(e)})},this.redirectToDetails=t=>{},this.redirectToAsign=t=>{this.orderService.saveOrder(t)},this.redirectToMap=(t,e)=>{}}ngOnInit(){this.getAllOrders()}open(t,e){this.getOrder(e,t)}openMap(t,e,i){this.lat=i,this.lng=e,this.modalService.open(t,{ariaLabelledBy:"modal-basic-title"}).result.then(t=>{this.closeResult=`Closed with: ${t}`},t=>{this.closeResult=`Dismissed ${this.getDismissReason(t)}`})}getDismissReason(t){return t===A.If.ESC?"by pressing ESC":t===A.If.BACKDROP_CLICK?"by clicking on a backdrop":`with: ${t}`}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(A.FF),a.Y36(s.b),a.Y36(T))},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-on-hold"]],decls:26,vars:4,consts:[["mat-table","",3,"dataSource"],["matColumnDef","Id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","restaurante"],["matColumnDef","ubicacion"],["matColumnDef","destino"],["matColumnDef","info"],["matColumnDef","asignar"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["id","center",4,"ngIf"],["mymodal",""],["class","modal-content"],["aux",""],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","",3,"click"],[1,"mat-18"],["mat-icon-button","","color","warning",3,"click"],["mat-icon-button","","color","accent",3,"click"],["mat-icon-button","","color","primary","routerLink","/assignation",3,"click"],["mat-header-row",""],["mat-row",""],["id","center"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[3,"usePanning","latitude","longitude","zoom"],[3,"latitude","longitude","markerDraggable"],[1,"info-row"],[1,"info-col"]],template:function(t,e){1&t&&(a.TgZ(0,"table",0),a.ynx(1,1),a.YNc(2,b,2,0,"th",2),a.YNc(3,U,2,1,"td",3),a.BQk(),a.ynx(4,4),a.YNc(5,x,2,0,"th",2),a.YNc(6,C,2,1,"td",3),a.BQk(),a.ynx(7,5),a.YNc(8,v,2,0,"th",2),a.YNc(9,O,5,1,"td",3),a.BQk(),a.ynx(10,6),a.YNc(11,M,2,0,"th",2),a.YNc(12,y,5,1,"td",3),a.BQk(),a.ynx(13,7),a.YNc(14,w,2,0,"th",2),a.YNc(15,I,4,0,"td",3),a.BQk(),a.ynx(16,8),a.YNc(17,P,2,0,"th",2),a.YNc(18,D,4,0,"td",3),a.BQk(),a.YNc(19,k,1,0,"tr",9),a.YNc(20,S,1,0,"tr",10),a.qZA(),a.YNc(21,N,2,0,"div",11),a.YNc(22,j,9,7,"ng-template",null,12,a.W1O),a.YNc(24,z,78,17,"ng-template",13,14,a.W1O)),2&t&&(a.Q6J("dataSource",e.dataonHold),a.xp6(19),a.Q6J("matHeaderRowDef",e.displayedColumns),a.xp6(1),a.Q6J("matRowDefColumns",e.displayedColumns),a.xp6(1),a.Q6J("ngIf",0===e.dataonHold.data.length))},directives:[f.BZ,f.w1,f.fO,f.Dz,f.as,f.nj,n.O5,f.ge,f.ev,l.lW,g.Hw,o.rH,f.XQ,f.Gk,q.SA,q.pt],styles:["table[_ngcontent-%COMP%]{padding:35px;border:35vh;margin:1vh;width:100%;overflow-x:auto;overflow-y:hidden;min-width:500px}th.mat-header-cell[_ngcontent-%COMP%]{text-align:left;max-width:50%;text-align:center!important}agm-map[_ngcontent-%COMP%]{height:300px}#aux[_ngcontent-%COMP%]{position:center}.info-row[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:200px}.info-row[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2em;padding:10px}.info-row[_ngcontent-%COMP%]{border:1px solid #000;display:grid;grid-template-columns:repeat(2,1fr)}.info-col[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-content:center;justify-content:flex-start}.modal-content[_ngcontent-%COMP%]{height:auto;min-height:100%!important;border-radius:0}"]}),t})();function $(t,e){1&t&&(a.TgZ(0,"th",15),a._uU(1," ID "),a.qZA())}function R(t,e){if(1&t&&(a.TgZ(0,"td",16),a._uU(1),a.qZA()),2&t){const t=e.$implicit;a.xp6(1),a.hij(" ",t.id," ")}}function L(t,e){1&t&&(a.TgZ(0,"th",15),a._uU(1," Restaurante "),a.qZA())}function E(t,e){if(1&t&&(a.TgZ(0,"td",16),a._uU(1),a.qZA()),2&t){const t=e.$implicit;a.xp6(1),a.hij(" ",t.local.name," ")}}function J(t,e){1&t&&(a.TgZ(0,"th",15),a._uU(1," Ubicaci\xf3n del restaurante "),a.qZA())}function F(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"td",16),a._uU(1),a.TgZ(2,"button",17),a.NdJ("click",function(){const e=a.CHM(t).$implicit,i=a.oxw(),n=a.MAs(23);return i.openMap(n,e.local.location_id.longitude,e.local.location_id.latitude)}),a.TgZ(3,"mat-icon",18),a._uU(4,"location_on"),a.qZA(),a.qZA(),a.qZA()}if(2&t){const t=e.$implicit;a.xp6(1),a.hij(" ",t.destiny_loc.reference," ")}}function Q(t,e){1&t&&(a.TgZ(0,"th",15),a._uU(1," Ubicaci\xf3n de destino "),a.qZA())}function H(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"td",16),a._uU(1),a.TgZ(2,"button",19),a.NdJ("click",function(){const e=a.CHM(t).$implicit,i=a.oxw(),n=a.MAs(23);return i.openMap(n,e.destiny_loc.longitude,e.destiny_loc.latitude)}),a.TgZ(3,"mat-icon",18),a._uU(4,"location_on"),a.qZA(),a.qZA(),a.qZA()}if(2&t){const t=e.$implicit;a.xp6(1),a.hij(" ",t.destiny_loc.reference," ")}}function B(t,e){1&t&&(a.TgZ(0,"th",15),a._uU(1," M\xe1s "),a.qZA())}function W(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"td",16),a.TgZ(1,"button",20),a.NdJ("click",function(){const e=a.CHM(t).$implicit,i=a.oxw(),n=a.MAs(25);return i.open(n,e.id)}),a.TgZ(2,"mat-icon",18),a._uU(3,"reorder"),a.qZA(),a.qZA(),a.qZA()}}function X(t,e){1&t&&(a.TgZ(0,"th",15),a._uU(1," Revocar "),a.qZA())}function K(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"td",16),a.TgZ(1,"button",21),a.NdJ("click",function(){const e=a.CHM(t).$implicit;return a.oxw().redirectToAsign(e)}),a.TgZ(2,"mat-icon",18),a._uU(3,"remove_circle"),a.qZA(),a.qZA(),a.qZA()}}function G(t,e){1&t&&a._UZ(0,"tr",22)}function V(t,e){1&t&&a._UZ(0,"tr",23)}function tt(t,e){1&t&&(a.TgZ(0,"div",24),a._uU(1,"\nNo hay pedidos activos\n"),a.qZA())}function et(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"div",25),a.TgZ(1,"h4",26),a._uU(2,"Mapa"),a.qZA(),a.TgZ(3,"button",27),a.NdJ("click",function(){return a.CHM(t).$implicit.dismiss("Cross click")}),a.TgZ(4,"span",28),a._uU(5,"\xd7"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(6,"div",29),a.TgZ(7,"agm-map",30),a._UZ(8,"agm-marker",31),a.qZA(),a.qZA()}if(2&t){const t=a.oxw();a.xp6(7),a.Q6J("usePanning",!0)("latitude",t.lat)("longitude",t.lng)("zoom",12),a.xp6(1),a.Q6J("latitude",t.lat)("longitude",t.lng)("markerDraggable",!0)}}function it(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"div",25),a.TgZ(1,"h4",26),a._uU(2,"Info del pedido"),a.qZA(),a.TgZ(3,"button",27),a.NdJ("click",function(){return a.CHM(t).$implicit.dismiss("Cross click")}),a.TgZ(4,"span",28),a._uU(5,"\xd7"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(6,"div",29),a.TgZ(7,"p"),a._uU(8),a.qZA(),a.TgZ(9,"div",32),a.TgZ(10,"div",33),a.TgZ(11,"h5"),a.TgZ(12,"b"),a._uU(13,"Empresa: "),a.qZA(),a.qZA(),a.TgZ(14,"span"),a.TgZ(15,"b"),a._uU(16,"Nombre:"),a.qZA(),a._uU(17),a.qZA(),a.TgZ(18,"span"),a.TgZ(19,"b"),a._uU(20,"Ubicaci\xf3n:"),a.qZA(),a._uU(21),a.qZA(),a.TgZ(22,"span"),a.TgZ(23,"b"),a._uU(24,"Email:"),a.qZA(),a._uU(25),a.qZA(),a.TgZ(26,"span"),a.TgZ(27,"b"),a._uU(28,"Fecha del pedido:"),a.qZA(),a._uU(29),a.qZA(),a.TgZ(30,"span"),a.TgZ(31,"b"),a._uU(32,"Hora del pedido:"),a.qZA(),a._uU(33),a.qZA(),a.TgZ(34,"span"),a.TgZ(35,"b"),a._uU(36,"RUC:"),a.qZA(),a._uU(37),a.qZA(),a.TgZ(38,"span"),a.TgZ(39,"b"),a._uU(40,"Pago tipo:"),a.qZA(),a._uU(41),a.qZA(),a.TgZ(42,"span"),a.TgZ(43,"b"),a._uU(44,"Precio total:"),a.qZA(),a._uU(45),a.qZA(),a.qZA(),a.TgZ(46,"div",33),a.TgZ(47,"h5"),a.TgZ(48,"b"),a._uU(49,"Cliente: "),a.qZA(),a.qZA(),a.TgZ(50,"span"),a.TgZ(51,"b"),a._uU(52,"ID del pedido:"),a.qZA(),a._uU(53),a.qZA(),a.TgZ(54,"span"),a.TgZ(55,"b"),a._uU(56,"Ubicaci\xf3n:"),a.qZA(),a._uU(57),a.qZA(),a.TgZ(58,"span"),a.TgZ(59,"b"),a._uU(60,"Descripci\xf3n:"),a.qZA(),a._uU(61),a.qZA(),a.TgZ(62,"span"),a.TgZ(63,"b"),a._uU(64,"Cliente:"),a.qZA(),a._uU(65),a.qZA(),a.TgZ(66,"span"),a.TgZ(67,"b"),a._uU(68,"C\xe9dula:"),a.qZA(),a._uU(69),a.qZA(),a.TgZ(70,"span"),a.TgZ(71,"b"),a._uU(72,"Precio del pedido:"),a.qZA(),a._uU(73),a.qZA(),a.TgZ(74,"span"),a.TgZ(75,"b"),a._uU(76,"Precio de env\xedo:"),a.qZA(),a._uU(77),a.qZA(),a.qZA(),a.TgZ(78,"div",33),a.TgZ(79,"h5"),a.TgZ(80,"b"),a._uU(81,"Motorizado: "),a.qZA(),a.qZA(),a.TgZ(82,"span"),a.TgZ(83,"b"),a._uU(84,"Nombre:"),a.qZA(),a._uU(85),a.qZA(),a.TgZ(86,"span"),a.TgZ(87,"b"),a._uU(88,"Fecha de asignaci\xf3n:"),a.qZA(),a._uU(89),a.qZA(),a.TgZ(90,"span"),a.TgZ(91,"b"),a._uU(92,"Hora de asignaci\xf3n:"),a.qZA(),a._uU(93),a.qZA(),a.qZA(),a.qZA(),a.qZA()}if(2&t){const t=a.oxw();a.xp6(8),a.hij("ID pedido ",t.orderInfo.id,""),a.xp6(9),a.hij(" ",t.orderInfo.local.name,""),a.xp6(4),a.hij(" ",t.orderInfo.local.location_id.reference,""),a.xp6(4),a.hij(" ",t.orderInfo.local.email,""),a.xp6(4),a.hij(" ",t.orderInfo.start_time.slice(0,10),""),a.xp6(4),a.hij(" ",t.orderInfo.start_time.slice(11,19),""),a.xp6(4),a.hij(" ",t.orderInfo.local.ruc,""),a.xp6(4),a.hij(" ",t.orderInfo.is_paid?"Tarjeta":"Efectivo",""),a.xp6(4),a.hij(" $",t.orderInfo.price+t.orderInfo.delivery_price,""),a.xp6(8),a.hij(" ",t.orderInfo.id,""),a.xp6(4),a.hij(" ",t.orderInfo.destiny_loc.reference,""),a.xp6(4),a.hij(" ",t.orderInfo.details,""),a.xp6(4),a.AsE(" ",t.orderInfo.client.name," ",t.orderInfo.client.apellido,""),a.xp6(4),a.hij(" ",t.orderInfo.client.id_number,""),a.xp6(4),a.hij(" $",t.orderInfo.price,""),a.xp6(4),a.hij(" $",null!=t.orderInfo.delivery_price?t.orderInfo.delivery_price:0,""),a.xp6(8),a.AsE(" ",t.orderInfo.motorizado.user_id.first_name," ",t.orderInfo.motorizado.user_id.last_name,""),a.xp6(4),a.hij(" ",t.orderInfo.mot_assigned_time.slice(0,10),""),a.xp6(4),a.hij(" ",t.orderInfo.mot_assigned_time.slice(11,19),"")}}let nt=(()=>{class t{constructor(t,e,i){this.modalService=t,this.repoService=e,this.orderService=i,this.lat=-2.2175001,this.lng=-79.9092901,this.closeResult="",this.displayedColumns=["Id","restaurante","ubicacion","destino","info","asignar"],this.dataSource=new f.by,this.dataAssigned=new f.by,this.getAllOrders=()=>{this.repoService.getData("api/orders/").subscribe(t=>{this.dataSource.data=t,this.orderService.saveOrderList(t);const e=[];this.dataSource.data.forEach((t,i)=>{null!==t.motorizado&&2===t.state&&e.push(t)}),this.dataAssigned=new f.by(e)})},this.redirectToDetails=t=>{},this.redirectToAsign=t=>{this.orderService.saveOrder(t)},this.redirectToMap=(t,e)=>{},this.getOrder=(t,e)=>{this.repoService.getData("api/orders/"+t+"/").toPromise().then(t=>{this.orderInfo=t,this.modalService.open(e,{ariaLabelledBy:"modal-basic-title"}).result.then(t=>{this.closeResult=`Closed with: ${t}`},t=>{this.closeResult=`Dismissed ${this.getDismissReason(t)}`})})}}ngOnInit(){this.getAllOrders()}open(t,e){this.getOrder(e,t)}openMap(t,e,i){this.lat=i,this.lng=e,this.modalService.open(t,{ariaLabelledBy:"modal-basic-title"}).result.then(t=>{this.closeResult=`Closed with: ${t}`},t=>{this.closeResult=`Dismissed ${this.getDismissReason(t)}`})}getDismissReason(t){return t===A.If.ESC?"by pressing ESC":t===A.If.BACKDROP_CLICK?"by clicking on a backdrop":`with: ${t}`}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(A.FF),a.Y36(s.b),a.Y36(T))},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-assigned"]],decls:26,vars:4,consts:[["mat-table","",3,"dataSource"],["matColumnDef","Id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","restaurante"],["matColumnDef","ubicacion"],["matColumnDef","destino"],["matColumnDef","info"],["matColumnDef","asignar"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["id","center",4,"ngIf"],["mymodal",""],["class","modal-content"],["aux",""],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","",3,"click"],[1,"mat-18"],["mat-icon-button","","color","warning",3,"click"],["mat-icon-button","","color","accent",3,"click"],["mat-icon-button","","color","warn","routerLink","/revoke",3,"click"],["mat-header-row",""],["mat-row",""],["id","center"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[3,"usePanning","latitude","longitude","zoom"],[3,"latitude","longitude","markerDraggable"],[1,"info-row"],[1,"info-col"]],template:function(t,e){1&t&&(a.TgZ(0,"table",0),a.ynx(1,1),a.YNc(2,$,2,0,"th",2),a.YNc(3,R,2,1,"td",3),a.BQk(),a.ynx(4,4),a.YNc(5,L,2,0,"th",2),a.YNc(6,E,2,1,"td",3),a.BQk(),a.ynx(7,5),a.YNc(8,J,2,0,"th",2),a.YNc(9,F,5,1,"td",3),a.BQk(),a.ynx(10,6),a.YNc(11,Q,2,0,"th",2),a.YNc(12,H,5,1,"td",3),a.BQk(),a.ynx(13,7),a.YNc(14,B,2,0,"th",2),a.YNc(15,W,4,0,"td",3),a.BQk(),a.ynx(16,8),a.YNc(17,X,2,0,"th",2),a.YNc(18,K,4,0,"td",3),a.BQk(),a.YNc(19,G,1,0,"tr",9),a.YNc(20,V,1,0,"tr",10),a.qZA(),a.YNc(21,tt,2,0,"div",11),a.YNc(22,et,9,7,"ng-template",null,12,a.W1O),a.YNc(24,it,94,21,"ng-template",13,14,a.W1O)),2&t&&(a.Q6J("dataSource",e.dataAssigned),a.xp6(19),a.Q6J("matHeaderRowDef",e.displayedColumns),a.xp6(1),a.Q6J("matRowDefColumns",e.displayedColumns),a.xp6(1),a.Q6J("ngIf",0===e.dataAssigned.data.length))},directives:[f.BZ,f.w1,f.fO,f.Dz,f.as,f.nj,n.O5,f.ge,f.ev,l.lW,g.Hw,o.rH,f.XQ,f.Gk,q.SA,q.pt],styles:["table[_ngcontent-%COMP%]{padding:35px;border:35vh;margin:1vh;width:100%;overflow-x:auto;overflow-y:hidden;min-width:500px}th.mat-header-cell[_ngcontent-%COMP%]{text-align:left;max-width:50%;text-align:center!important}agm-map[_ngcontent-%COMP%]{height:300px}#aux[_ngcontent-%COMP%]{position:center}.info-row[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:200px}.info-row[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2em;padding:10px}.info-row[_ngcontent-%COMP%]{border:1px solid #000;display:grid;grid-template-columns:repeat(2,1fr)}.info-col[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-content:center;justify-content:flex-start}.modal-content[_ngcontent-%COMP%]{height:auto;min-height:100%!important;border-radius:0}"]}),t})();var ot=i(6304),rt=i(7841),at=(i(6705),i(8002)),st=i(8502);let ct=(()=>{class t{constructor(t){this.afs=t,this.idOperador=window.sessionStorage.getItem("user_id")}addChatMessage(t,e){var i=this;return(0,ot.Z)(function*(){const n=rt.Z.firestore.FieldValue.serverTimestamp();return yield i.afs.doc("messages_chat/"+e.motorizado.user_id.id+"_"+i.idOperador).set({idMotorizado:e.motorizado.user_id.id,idOperador:i.idOperador,lastMessageDate:n},{merge:!0}),i.afs.collection(`messages_chat/${e.motorizado.user_id.id+"_"+i.idOperador}/messages`).add({msg:t,from:Number(i.idOperador),createdAt:n})})()}getChatMessages(t){return this.afs.collection(`messages_chat/${t.motorizado.user_id.id+"_"+this.idOperador}/messages`,t=>t.orderBy("createdAt","asc")).valueChanges({idField:"id"}).pipe((0,at.U)(t=>(t.forEach(t=>{t.fromName=this.getUserForMsg(Number(t.from)),t.myMsg=Number(t.from)===Number(this.idOperador)}),t)))}getUserForMsg(t){return t===Number(this.idOperador)?"Operador":"Otro"}}return t.\u0275fac=function(e){return new(e||t)(a.LFG(st.ST))},t.\u0275prov=a.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var dt=i(3679);function lt(t,e){1&t&&(a.TgZ(0,"th",18),a._uU(1," ID "),a.qZA())}function gt(t,e){if(1&t&&(a.TgZ(0,"td",19),a._uU(1),a.qZA()),2&t){const t=e.$implicit;a.xp6(1),a.hij(" ",t.id," ")}}function ut(t,e){1&t&&(a.TgZ(0,"th",18),a._uU(1," Restaurante "),a.qZA())}function Zt(t,e){if(1&t&&(a.TgZ(0,"td",19),a._uU(1),a.qZA()),2&t){const t=e.$implicit;a.xp6(1),a.hij(" ",t.local.name," ")}}function pt(t,e){1&t&&(a.TgZ(0,"th",18),a._uU(1," Ubicaci\xf3n del restaurante "),a.qZA())}function mt(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"td",19),a._uU(1),a.TgZ(2,"button",20),a.NdJ("click",function(){const e=a.CHM(t).$implicit,i=a.oxw(),n=a.MAs(29);return i.openMap(n,e.local.location_id.longitude,e.local.location_id.latitude)}),a.TgZ(3,"mat-icon",21),a._uU(4,"location_on"),a.qZA(),a.qZA(),a.qZA()}if(2&t){const t=e.$implicit;a.xp6(1),a.hij(" ",t.destiny_loc.reference," ")}}function ht(t,e){1&t&&(a.TgZ(0,"th",18),a._uU(1," Ubicaci\xf3n de destino "),a.qZA())}function _t(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"td",19),a._uU(1),a.TgZ(2,"button",22),a.NdJ("click",function(){const e=a.CHM(t).$implicit,i=a.oxw(),n=a.MAs(29);return i.openMap(n,e.destiny_loc.longitude,e.destiny_loc.latitude)}),a.TgZ(3,"mat-icon",21),a._uU(4,"location_on"),a.qZA(),a.qZA(),a.qZA()}if(2&t){const t=e.$implicit;a.xp6(1),a.hij(" ",t.destiny_loc.reference," ")}}function ft(t,e){1&t&&(a.TgZ(0,"th",18),a._uU(1," Estado "),a.qZA())}function At(t,e){if(1&t&&(a.TgZ(0,"td",19),a._uU(1),a.qZA()),2&t){const t=e.$implicit;a.xp6(1),a.hij(" ",3==t.state?"Aceptado":4==t.state?"Recogiendo":"Entregando"," ")}}function Tt(t,e){1&t&&(a.TgZ(0,"th",18),a._uU(1," M\xe1s "),a.qZA())}function qt(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"td",19),a.TgZ(1,"button",23),a.NdJ("click",function(){const e=a.CHM(t).$implicit,i=a.oxw(),n=a.MAs(31);return i.open(n,e.id)}),a.TgZ(2,"mat-icon",21),a._uU(3,"reorder"),a.qZA(),a.qZA(),a.qZA()}}function bt(t,e){1&t&&(a.TgZ(0,"th",18),a._uU(1," Chat "),a.qZA())}function Ut(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"td",19),a.TgZ(1,"button",23),a.NdJ("click",function(){const e=a.CHM(t).$implicit,i=a.oxw(),n=a.MAs(33);return i.openChat(n,e)}),a.TgZ(2,"mat-icon",21),a._uU(3,"chat"),a.qZA(),a.qZA(),a.qZA()}}function xt(t,e){1&t&&(a.TgZ(0,"th",18),a._uU(1," Revocar "),a.qZA())}function Ct(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"td",19),a.TgZ(1,"button",24),a.NdJ("click",function(){const e=a.CHM(t).$implicit;return a.oxw().redirectToAsign(e)}),a.TgZ(2,"mat-icon",21),a._uU(3,"remove_circle"),a.qZA(),a.qZA(),a.qZA()}}function vt(t,e){1&t&&a._UZ(0,"tr",25)}function Ot(t,e){1&t&&a._UZ(0,"tr",26)}function Mt(t,e){1&t&&(a.TgZ(0,"div",27),a._uU(1," No hay pedidos activos\n"),a.qZA())}function yt(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"div",28),a.TgZ(1,"h4",29),a._uU(2,"Mapa"),a.qZA(),a.TgZ(3,"button",30),a.NdJ("click",function(){return a.CHM(t).$implicit.dismiss("Cross click")}),a.TgZ(4,"span",31),a._uU(5,"\xd7"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(6,"div",32),a.TgZ(7,"agm-map",33),a._UZ(8,"agm-marker",34),a.qZA(),a.qZA()}if(2&t){const t=a.oxw();a.xp6(7),a.Q6J("usePanning",!0)("latitude",t.lat)("longitude",t.lng)("zoom",12),a.xp6(1),a.Q6J("latitude",t.lat)("longitude",t.lng)("markerDraggable",!0)}}function wt(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"div",28),a.TgZ(1,"h4",29),a._uU(2,"Info del pedido"),a.qZA(),a.TgZ(3,"button",30),a.NdJ("click",function(){return a.CHM(t).$implicit.dismiss("Cross click")}),a.TgZ(4,"span",31),a._uU(5,"\xd7"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(6,"div",32),a.TgZ(7,"p"),a._uU(8),a.qZA(),a.TgZ(9,"div",35),a.TgZ(10,"div",36),a.TgZ(11,"h5"),a.TgZ(12,"b"),a._uU(13,"Empresa: "),a.qZA(),a.qZA(),a.TgZ(14,"span"),a.TgZ(15,"b"),a._uU(16,"Nombre:"),a.qZA(),a._uU(17),a.qZA(),a.TgZ(18,"span"),a.TgZ(19,"b"),a._uU(20,"Ubicaci\xf3n:"),a.qZA(),a._uU(21),a.qZA(),a.TgZ(22,"span"),a.TgZ(23,"b"),a._uU(24,"Email:"),a.qZA(),a._uU(25),a.qZA(),a.TgZ(26,"span"),a.TgZ(27,"b"),a._uU(28,"Fecha del pedido:"),a.qZA(),a._uU(29),a.qZA(),a.TgZ(30,"span"),a.TgZ(31,"b"),a._uU(32,"Hora del pedido:"),a.qZA(),a._uU(33),a.qZA(),a.TgZ(34,"span"),a.TgZ(35,"b"),a._uU(36,"RUC:"),a.qZA(),a._uU(37),a.qZA(),a.TgZ(38,"span"),a.TgZ(39,"b"),a._uU(40,"Pago tipo:"),a.qZA(),a._uU(41),a.qZA(),a.TgZ(42,"span"),a.TgZ(43,"b"),a._uU(44,"Precio total:"),a.qZA(),a._uU(45),a.qZA(),a.qZA(),a.TgZ(46,"div",36),a.TgZ(47,"h5"),a.TgZ(48,"b"),a._uU(49,"Cliente: "),a.qZA(),a.qZA(),a.TgZ(50,"span"),a.TgZ(51,"b"),a._uU(52,"ID del pedido:"),a.qZA(),a._uU(53),a.qZA(),a.TgZ(54,"span"),a.TgZ(55,"b"),a._uU(56,"Ubicaci\xf3n:"),a.qZA(),a._uU(57),a.qZA(),a.TgZ(58,"span"),a.TgZ(59,"b"),a._uU(60,"Descripci\xf3n:"),a.qZA(),a._uU(61),a.qZA(),a.TgZ(62,"span"),a.TgZ(63,"b"),a._uU(64,"Cliente:"),a.qZA(),a._uU(65),a.qZA(),a.TgZ(66,"span"),a.TgZ(67,"b"),a._uU(68,"C\xe9dula:"),a.qZA(),a._uU(69),a.qZA(),a.TgZ(70,"span"),a.TgZ(71,"b"),a._uU(72,"Precio del pedido:"),a.qZA(),a._uU(73),a.qZA(),a.TgZ(74,"span"),a.TgZ(75,"b"),a._uU(76,"Precio de env\xedo:"),a.qZA(),a._uU(77),a.qZA(),a.qZA(),a.TgZ(78,"div",36),a.TgZ(79,"h5"),a.TgZ(80,"b"),a._uU(81,"Motorizado: "),a.qZA(),a.qZA(),a.TgZ(82,"span"),a.TgZ(83,"b"),a._uU(84,"Nombre:"),a.qZA(),a._uU(85),a.qZA(),a.TgZ(86,"span"),a.TgZ(87,"b"),a._uU(88,"Fecha de asignaci\xf3n:"),a.qZA(),a._uU(89),a.qZA(),a.TgZ(90,"span"),a.TgZ(91,"b"),a._uU(92,"Hora de asignaci\xf3n:"),a.qZA(),a._uU(93),a.qZA(),a.qZA(),a.qZA(),a.qZA()}if(2&t){const t=a.oxw();a.xp6(8),a.hij("ID pedido ",t.orderInfo.id,""),a.xp6(9),a.hij(" ",t.orderInfo.local.name,""),a.xp6(4),a.hij(" ",t.orderInfo.local.location_id.reference,""),a.xp6(4),a.hij(" ",t.orderInfo.local.email,""),a.xp6(4),a.hij(" ",t.orderInfo.start_time.slice(0,10),""),a.xp6(4),a.hij(" ",t.orderInfo.start_time.slice(11,19),""),a.xp6(4),a.hij(" ",t.orderInfo.local.ruc,""),a.xp6(4),a.hij(" ",t.orderInfo.is_paid?"Tarjeta":"Efectivo",""),a.xp6(4),a.hij(" $",t.orderInfo.price+t.orderInfo.delivery_price,""),a.xp6(8),a.hij(" ",t.orderInfo.id,""),a.xp6(4),a.hij(" ",t.orderInfo.destiny_loc.reference,""),a.xp6(4),a.hij(" ",t.orderInfo.details,""),a.xp6(4),a.AsE(" ",t.orderInfo.client.name," ",t.orderInfo.client.apellido,""),a.xp6(4),a.hij(" ",t.orderInfo.client.id_number,""),a.xp6(4),a.hij(" $",t.orderInfo.price,""),a.xp6(4),a.hij(" $",null!=t.orderInfo.delivery_price?t.orderInfo.delivery_price:0,""),a.xp6(8),a.AsE(" ",t.orderInfo.motorizado.user_id.first_name," ",t.orderInfo.motorizado.user_id.last_name,""),a.xp6(4),a.hij(" ",t.orderInfo.mot_assigned_time.slice(0,10),""),a.xp6(4),a.hij(" ",t.orderInfo.mot_assigned_time.slice(10,19),"")}}const It=function(t){return{"justify-end":t}},Pt=function(t,e){return{"my-message":t,"other-message":e}};function Dt(t,e){if(1&t&&(a.TgZ(0,"div",41),a.TgZ(1,"div",42),a.TgZ(2,"div",43),a.TgZ(3,"span"),a._uU(4),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&t){const t=e.$implicit;a.Q6J("ngClass",a.VKq(3,It,t.myMsg)),a.xp6(2),a.Q6J("ngClass",a.WLB(5,Pt,t.myMsg,!t.myMsg)),a.xp6(2),a.Oqu(t.msg)}}function kt(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"div",28),a.TgZ(1,"h4",29),a._uU(2,"chat"),a.qZA(),a.TgZ(3,"button",30),a.NdJ("click",function(){return a.CHM(t).$implicit.dismiss("Cross click")}),a.TgZ(4,"span",31),a._uU(5,"\xd7"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(6,"div",32),a.YNc(7,Dt,5,8,"div",37),a.ALo(8,"async"),a.TgZ(9,"div",38),a.TgZ(10,"textarea",39),a.NdJ("ngModelChange",function(e){return a.CHM(t),a.oxw().newMsg=e}),a.qZA(),a.TgZ(11,"mat-icon",40),a.NdJ("click",function(){a.CHM(t);const e=a.oxw();return e.sendMessage(e.ordenChat)}),a._uU(12,"send"),a.qZA(),a.qZA(),a.qZA()}if(2&t){const t=a.oxw();a.xp6(7),a.Q6J("ngForOf",a.lcZ(8,2,t.messages)),a.xp6(3),a.Q6J("ngModel",t.newMsg)}}let St=(()=>{class t{constructor(t,e,i,n){this.modalService=t,this.repoService=e,this.orderService=i,this.chatService=n,this.lat=-2.2175001,this.lng=-79.9092901,this.closeResult="",this.newMsg="",this.displayedColumns=["Id","restaurante","ubicacion","destino","estado","info","chat","asignar"],this.dataSource=new f.by,this.dataActive=new f.by,this.getAllOrders=()=>{this.repoService.getData("api/orders/").subscribe(t=>{this.dataSource.data=t,this.orderService.saveOrderList(t);const e=[];this.dataSource.data.forEach((t,i)=>{null!==t.motorizado&&(3!==t.state&&4!==t.state&&5!==t.state||e.push(t))}),this.dataActive=new f.by(e)})},this.redirectToDetails=t=>{},this.redirectToAsign=t=>{this.orderService.saveOrder(t)},this.redirectToMap=(t,e)=>{},this.getOrder=(t,e)=>{this.repoService.getData("api/orders/"+t+"/").toPromise().then(t=>{this.orderInfo=t,this.modalService.open(e,{ariaLabelledBy:"modal-basic-title"}).result.then(t=>{this.closeResult=`Closed with: ${t}`},t=>{this.closeResult=`Dismissed ${this.getDismissReason(t)}`})})}}ngOnInit(){this.getAllOrders()}openChat(t,e){var i=this;return(0,ot.Z)(function*(){i.messages=i.chatService.getChatMessages(e),i.ordenChat=e,i.modalService.open(t,{ariaLabelledBy:"modal-basic-title"}).result.then(t=>{i.closeResult=`Closed with: ${t}`},t=>{i.closeResult=`Dismissed ${i.getDismissReason(t)}`})})()}sendMessage(t){this.chatService.addChatMessage(this.newMsg,t).then(()=>{this.newMsg=""})}open(t,e){this.getOrder(e,t)}openMap(t,e,i){this.lat=i,this.lng=e,this.modalService.open(t,{ariaLabelledBy:"modal-basic-title"}).result.then(t=>{this.closeResult=`Closed with: ${t}`},t=>{this.closeResult=`Dismissed ${this.getDismissReason(t)}`})}getDismissReason(t){return t===A.If.ESC?"by pressing ESC":t===A.If.BACKDROP_CLICK?"by clicking on a backdrop":`with: ${t}`}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(A.FF),a.Y36(s.b),a.Y36(T),a.Y36(ct))},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-active"]],decls:34,vars:4,consts:[["mat-table","",3,"dataSource"],["matColumnDef","Id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","restaurante"],["matColumnDef","ubicacion"],["matColumnDef","destino"],["matColumnDef","estado"],["matColumnDef","info"],["matColumnDef","chat"],["matColumnDef","asignar"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["id","center",4,"ngIf"],["mymodal",""],["class","modal-content"],["aux",""],["chatmodal",""],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","",3,"click"],[1,"mat-18"],["mat-icon-button","","color","warning",3,"click"],["mat-icon-button","","color","accent",3,"click"],["mat-icon-button","","color","warn","routerLink","/revoke",3,"click"],["mat-header-row",""],["mat-row",""],["id","center"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[3,"usePanning","latitude","longitude","zoom"],[3,"latitude","longitude","markerDraggable"],[1,"info-row"],[1,"info-col"],["class","chat-row",3,"ngClass",4,"ngFor","ngForOf"],[1,"input-row"],["placeholder","Inicie a escribir aqu\xed...","autoGrow","true","rows","1","maxLength","100",1,"message-input",3,"ngModel","ngModelChange"],[1,"mat-18",3,"click"],[1,"chat-row",3,"ngClass"],[1,"chat-container"],[1,"message",3,"ngClass"]],template:function(t,e){1&t&&(a.TgZ(0,"table",0),a.ynx(1,1),a.YNc(2,lt,2,0,"th",2),a.YNc(3,gt,2,1,"td",3),a.BQk(),a.ynx(4,4),a.YNc(5,ut,2,0,"th",2),a.YNc(6,Zt,2,1,"td",3),a.BQk(),a.ynx(7,5),a.YNc(8,pt,2,0,"th",2),a.YNc(9,mt,5,1,"td",3),a.BQk(),a.ynx(10,6),a.YNc(11,ht,2,0,"th",2),a.YNc(12,_t,5,1,"td",3),a.BQk(),a.ynx(13,7),a.YNc(14,ft,2,0,"th",2),a.YNc(15,At,2,1,"td",3),a.BQk(),a.ynx(16,8),a.YNc(17,Tt,2,0,"th",2),a.YNc(18,qt,4,0,"td",3),a.BQk(),a.ynx(19,9),a.YNc(20,bt,2,0,"th",2),a.YNc(21,Ut,4,0,"td",3),a.BQk(),a.ynx(22,10),a.YNc(23,xt,2,0,"th",2),a.YNc(24,Ct,4,0,"td",3),a.BQk(),a.YNc(25,vt,1,0,"tr",11),a.YNc(26,Ot,1,0,"tr",12),a.qZA(),a.YNc(27,Mt,2,0,"div",13),a.YNc(28,yt,9,7,"ng-template",null,14,a.W1O),a.YNc(30,wt,94,21,"ng-template",15,16,a.W1O),a.YNc(32,kt,13,4,"ng-template",null,17,a.W1O)),2&t&&(a.Q6J("dataSource",e.dataActive),a.xp6(25),a.Q6J("matHeaderRowDef",e.displayedColumns),a.xp6(1),a.Q6J("matRowDefColumns",e.displayedColumns),a.xp6(1),a.Q6J("ngIf",0===e.dataActive.data.length))},directives:[f.BZ,f.w1,f.fO,f.Dz,f.as,f.nj,n.O5,f.ge,f.ev,l.lW,g.Hw,o.rH,f.XQ,f.Gk,q.SA,q.pt,n.sg,dt.Fj,dt.JJ,dt.On,n.mk],pipes:[n.Ov],styles:["table[_ngcontent-%COMP%]{padding:35px;border:35vh;margin:1vh;width:100%;overflow-x:auto;overflow-y:hidden;min-width:500px}th.mat-header-cell[_ngcontent-%COMP%]{text-align:left;max-width:50%;text-align:center!important}agm-map[_ngcontent-%COMP%]{height:300px}#aux[_ngcontent-%COMP%]{position:center}.info-row[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:200px}.info-row[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2em;padding:10px}.info-row[_ngcontent-%COMP%]{border:1px solid #000;display:grid;grid-template-columns:repeat(2,1fr)}.info-col[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-content:center;justify-content:flex-start}.modal-content[_ngcontent-%COMP%]{height:auto;min-height:100%!important;border-radius:0}[_ngcontent-%COMP%]:root{--ion-color-primary:#f26623;--ion-color-light:#fff;--enable-color:#7b67fb}.my-message[_ngcontent-%COMP%]{background-color:#7b67fb;color:#fff}.other-message[_ngcontent-%COMP%]{background-color:#dfdfdf;color:#f26623}.message[_ngcontent-%COMP%]{padding:5px 10px;text-align:left;font-size:.6rem;border-radius:20px;white-space:pre-wrap}.chat-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:70%;margin-top:10px;margin-bottom:10px}.justify-end[_ngcontent-%COMP%]{justify-content:flex-end}"]}),t})();function Nt(t,e){1&t&&(a.TgZ(0,"th",13),a._uU(1," ID "),a.qZA())}function jt(t,e){if(1&t&&(a.TgZ(0,"td",14),a._uU(1),a.qZA()),2&t){const t=e.$implicit;a.xp6(1),a.hij(" ",t.id," ")}}function zt(t,e){1&t&&(a.TgZ(0,"th",13),a._uU(1," Restaurante "),a.qZA())}function Yt(t,e){if(1&t&&(a.TgZ(0,"td",14),a._uU(1),a.qZA()),2&t){const t=e.$implicit;a.xp6(1),a.hij(" ",t.local.name," ")}}function $t(t,e){1&t&&(a.TgZ(0,"th",13),a._uU(1," Ubicaci\xf3n del restaurante "),a.qZA())}function Rt(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"td",14),a._uU(1),a.TgZ(2,"button",15),a.NdJ("click",function(){const e=a.CHM(t).$implicit,i=a.oxw(),n=a.MAs(17);return i.openMap(n,e.local.location_id.longitude,e.local.location_id.latitude)}),a.TgZ(3,"mat-icon",16),a._uU(4,"location_on"),a.qZA(),a.qZA(),a.qZA()}if(2&t){const t=e.$implicit;a.xp6(1),a.hij(" ",t.destiny_loc.reference," ")}}function Lt(t,e){1&t&&(a.TgZ(0,"th",13),a._uU(1," M\xe1s "),a.qZA())}function Et(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"td",14),a.TgZ(1,"button",17),a.NdJ("click",function(){const e=a.CHM(t).$implicit,i=a.oxw(),n=a.MAs(19);return i.open(n,e.id)}),a.TgZ(2,"mat-icon",16),a._uU(3,"reorder"),a.qZA(),a.qZA(),a.qZA()}}function Jt(t,e){1&t&&a._UZ(0,"tr",18)}function Ft(t,e){1&t&&a._UZ(0,"tr",19)}function Qt(t,e){1&t&&(a.TgZ(0,"div",20),a._uU(1," No hay pedidos entregados\n"),a.qZA())}function Ht(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"div",21),a.TgZ(1,"h4",22),a._uU(2,"Mapa"),a.qZA(),a.TgZ(3,"button",23),a.NdJ("click",function(){return a.CHM(t).$implicit.dismiss("Cross click")}),a.TgZ(4,"span",24),a._uU(5,"\xd7"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(6,"div",25),a.TgZ(7,"agm-map",26),a._UZ(8,"agm-marker",27),a.qZA(),a.qZA()}if(2&t){const t=a.oxw();a.xp6(7),a.Q6J("usePanning",!0)("latitude",t.lat)("longitude",t.lng)("zoom",12),a.xp6(1),a.Q6J("latitude",t.lat)("longitude",t.lng)("markerDraggable",!0)}}function Bt(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"div",21),a.TgZ(1,"h4",22),a._uU(2,"Info del pedido"),a.qZA(),a.TgZ(3,"button",23),a.NdJ("click",function(){return a.CHM(t).$implicit.dismiss("Cross click")}),a.TgZ(4,"span",24),a._uU(5,"\xd7"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(6,"div",25),a.TgZ(7,"p"),a._uU(8),a.qZA(),a.TgZ(9,"div",28),a.TgZ(10,"div",29),a.TgZ(11,"h5"),a.TgZ(12,"b"),a._uU(13,"Datos de la empresa: "),a.qZA(),a.qZA(),a.TgZ(14,"span"),a.TgZ(15,"b"),a._uU(16,"Nombre:"),a.qZA(),a._uU(17),a.qZA(),a.TgZ(18,"span"),a.TgZ(19,"b"),a._uU(20,"Ubicaci\xf3n:"),a.qZA(),a._uU(21),a.qZA(),a.TgZ(22,"span"),a.TgZ(23,"b"),a._uU(24,"Email:"),a.qZA(),a._uU(25),a.qZA(),a.TgZ(26,"span"),a.TgZ(27,"b"),a._uU(28,"Fecha del pedido:"),a.qZA(),a._uU(29),a.qZA(),a.TgZ(30,"span"),a.TgZ(31,"b"),a._uU(32,"Hora del pedido:"),a.qZA(),a._uU(33),a.qZA(),a.TgZ(34,"span"),a.TgZ(35,"b"),a._uU(36,"RUC:"),a.qZA(),a._uU(37),a.qZA(),a.TgZ(38,"span"),a.TgZ(39,"b"),a._uU(40,"Pago tipo:"),a.qZA(),a._uU(41),a.qZA(),a.TgZ(42,"span"),a.TgZ(43,"b"),a._uU(44,"Precio total:"),a.qZA(),a._uU(45),a.qZA(),a.qZA(),a.TgZ(46,"div",29),a.TgZ(47,"h5"),a.TgZ(48,"b"),a._uU(49,"Datos del cliente: "),a.qZA(),a.qZA(),a.TgZ(50,"span"),a.TgZ(51,"b"),a._uU(52,"ID del pedido:"),a.qZA(),a._uU(53),a.qZA(),a.TgZ(54,"span"),a.TgZ(55,"b"),a._uU(56,"Ubicaci\xf3n:"),a.qZA(),a._uU(57),a.qZA(),a.TgZ(58,"span"),a.TgZ(59,"b"),a._uU(60,"Descripci\xf3n:"),a.qZA(),a._uU(61),a.qZA(),a.TgZ(62,"span"),a.TgZ(63,"b"),a._uU(64,"Cliente:"),a.qZA(),a._uU(65),a.qZA(),a.TgZ(66,"span"),a.TgZ(67,"b"),a._uU(68,"C\xe9dula:"),a.qZA(),a._uU(69),a.qZA(),a.TgZ(70,"span"),a.TgZ(71,"b"),a._uU(72,"Precio del pedido:"),a.qZA(),a._uU(73),a.qZA(),a.TgZ(74,"span"),a.TgZ(75,"b"),a._uU(76,"Precio de env\xedo:"),a.qZA(),a._uU(77),a.qZA(),a.qZA(),a.TgZ(78,"div",29),a.TgZ(79,"h5"),a.TgZ(80,"b"),a._uU(81,"Motorizado: "),a.qZA(),a.qZA(),a.TgZ(82,"span"),a.TgZ(83,"b"),a._uU(84,"Nombre:"),a.qZA(),a._uU(85),a.qZA(),a.TgZ(86,"span"),a.TgZ(87,"b"),a._uU(88,"Fecha de asignaci\xf3n:"),a.qZA(),a._uU(89),a.qZA(),a.TgZ(90,"span"),a.TgZ(91,"b"),a._uU(92,"Hora de asignaci\xf3n:"),a.qZA(),a._uU(93),a.qZA(),a.TgZ(94,"span"),a.TgZ(95,"b"),a._uU(96,"Fecha de entrega:"),a.qZA(),a._uU(97),a.qZA(),a.TgZ(98,"span"),a.TgZ(99,"b"),a._uU(100,"Hora de entrega:"),a.qZA(),a._uU(101),a.qZA(),a.qZA(),a.qZA(),a.qZA()}if(2&t){const t=a.oxw();a.xp6(8),a.hij("ID pedido ",t.orderInfo.id,""),a.xp6(9),a.hij(" ",t.orderInfo.local.name,""),a.xp6(4),a.hij(" ",t.orderInfo.local.location_id.reference,""),a.xp6(4),a.hij(" ",t.orderInfo.local.email,""),a.xp6(4),a.hij(" ",t.orderInfo.start_time.slice(0,10),""),a.xp6(4),a.hij(" ",t.orderInfo.start_time.slice(11,19),""),a.xp6(4),a.hij(" ",t.orderInfo.local.ruc,""),a.xp6(4),a.hij(" ",t.orderInfo.is_paid?"Tarjeta":"Efectivo",""),a.xp6(4),a.hij(" $",t.orderInfo.price+t.orderInfo.delivery_price,""),a.xp6(8),a.hij(" ",t.orderInfo.id,""),a.xp6(4),a.hij(" ",t.orderInfo.destiny_loc.reference,""),a.xp6(4),a.hij(" ",t.orderInfo.details,""),a.xp6(4),a.AsE(" ",t.orderInfo.client.name," ",t.orderInfo.client.apellido,""),a.xp6(4),a.hij(" ",t.orderInfo.client.id_number,""),a.xp6(4),a.hij(" $",t.orderInfo.price,""),a.xp6(4),a.hij(" $",null!=t.orderInfo.delivery_price?t.orderInfo.delivery_price:0,""),a.xp6(8),a.AsE(" ",t.orderInfo.motorizado.user_id.first_name," ",t.orderInfo.motorizado.user_id.last_name,""),a.xp6(4),a.hij(" ",t.orderInfo.mot_assigned_time.slice(0,10),""),a.xp6(4),a.hij(" ",t.orderInfo.mot_assigned_time.slice(11,19),""),a.xp6(4),a.hij(" ",t.orderInfo.arriv_estimated_time.slice(0,10),""),a.xp6(4),a.hij(" ",t.orderInfo.arriv_estimated_time.slice(11,19),"")}}let Wt=(()=>{class t{constructor(t,e,i){this.modalService=t,this.repoService=e,this.orderService=i,this.displayedColumns=["Id","restaurante","ubicacion","info"],this.dataSource=new f.by,this.dataDelivered=new f.by,this.closeResult="",this.getAllOrders=()=>{this.repoService.getData("api/orders/").subscribe(t=>{this.dataSource.data=t,this.orderService.saveOrderList(t);const e=[];this.dataSource.data.forEach((t,i)=>{null!==t.motorizado&&6===t.state&&e.push(t)}),this.dataDelivered=new f.by(e)})},this.getOrder=(t,e)=>{this.repoService.getData("api/orders/"+t+"/").toPromise().then(t=>{this.orderInfo=t,this.modalService.open(e,{ariaLabelledBy:"modal-basic-title"}).result.then(t=>{this.closeResult=`Closed with: ${t}`},t=>{this.closeResult=`Dismissed ${this.getDismissReason(t)}`})})}}ngOnInit(){this.getAllOrders()}open(t,e){this.getOrder(e,t)}openMap(t,e,i){this.lat=i,this.lng=e,this.modalService.open(t,{ariaLabelledBy:"modal-basic-title"}).result.then(t=>{this.closeResult=`Closed with: ${t}`},t=>{this.closeResult=`Dismissed ${this.getDismissReason(t)}`})}getDismissReason(t){return t===A.If.ESC?"by pressing ESC":t===A.If.BACKDROP_CLICK?"by clicking on a backdrop":`with: ${t}`}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(A.FF),a.Y36(s.b),a.Y36(T))},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-delivered"]],decls:20,vars:4,consts:[["mat-table","",3,"dataSource"],["matColumnDef","Id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","restaurante"],["matColumnDef","ubicacion"],["matColumnDef","info"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["id","center",4,"ngIf"],["mymodal",""],["class","modal-content"],["aux",""],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","",3,"click"],[1,"mat-18"],["mat-icon-button","","color","accent",3,"click"],["mat-header-row",""],["mat-row",""],["id","center"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[3,"usePanning","latitude","longitude","zoom"],[3,"latitude","longitude","markerDraggable"],[1,"info-row"],[1,"info-col"]],template:function(t,e){1&t&&(a.TgZ(0,"table",0),a.ynx(1,1),a.YNc(2,Nt,2,0,"th",2),a.YNc(3,jt,2,1,"td",3),a.BQk(),a.ynx(4,4),a.YNc(5,zt,2,0,"th",2),a.YNc(6,Yt,2,1,"td",3),a.BQk(),a.ynx(7,5),a.YNc(8,$t,2,0,"th",2),a.YNc(9,Rt,5,1,"td",3),a.BQk(),a.ynx(10,6),a.YNc(11,Lt,2,0,"th",2),a.YNc(12,Et,4,0,"td",3),a.BQk(),a.YNc(13,Jt,1,0,"tr",7),a.YNc(14,Ft,1,0,"tr",8),a.qZA(),a.YNc(15,Qt,2,0,"div",9),a.YNc(16,Ht,9,7,"ng-template",null,10,a.W1O),a.YNc(18,Bt,102,23,"ng-template",11,12,a.W1O)),2&t&&(a.Q6J("dataSource",e.dataDelivered),a.xp6(13),a.Q6J("matHeaderRowDef",e.displayedColumns),a.xp6(1),a.Q6J("matRowDefColumns",e.displayedColumns),a.xp6(1),a.Q6J("ngIf",0===e.dataDelivered.data.length))},directives:[f.BZ,f.w1,f.fO,f.Dz,f.as,f.nj,n.O5,f.ge,f.ev,l.lW,g.Hw,f.XQ,f.Gk,q.SA,q.pt],styles:["table[_ngcontent-%COMP%]{padding:35px;border:35vh;margin:1vh;width:100%;overflow-x:auto;overflow-y:hidden;min-width:500px}th.mat-header-cell[_ngcontent-%COMP%]{text-align:left;max-width:50%;text-align:center!important}agm-map[_ngcontent-%COMP%]{height:300px}#aux[_ngcontent-%COMP%]{position:center}.info-row[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:200px}.info-row[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2em;padding:10px}.info-row[_ngcontent-%COMP%]{border:1px solid #000;display:grid;grid-template-columns:repeat(2,1fr)}.info-col[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-content:center;justify-content:flex-start}.modal-content[_ngcontent-%COMP%]{height:auto;min-height:100%!important;border-radius:0}"]}),t})();function Xt(t,e){1&t&&(a.TgZ(0,"th",13),a._uU(1," ID "),a.qZA())}function Kt(t,e){if(1&t&&(a.TgZ(0,"td",14),a._uU(1),a.qZA()),2&t){const t=e.$implicit;a.xp6(1),a.hij(" ",t.Id," ")}}function Gt(t,e){1&t&&(a.TgZ(0,"th",13),a._uU(1," Restaurante "),a.qZA())}function Vt(t,e){if(1&t&&(a.TgZ(0,"td",14),a._uU(1),a.qZA()),2&t){const t=e.$implicit;a.xp6(1),a.hij(" ",t.restaurante," ")}}function te(t,e){1&t&&(a.TgZ(0,"th",13),a._uU(1," Ubicaci\xf3n del restaurante "),a.qZA())}function ee(t,e){if(1&t&&(a.TgZ(0,"td",14),a._uU(1),a.TgZ(2,"button",15),a.TgZ(3,"mat-icon",16),a._uU(4,"location_on"),a.qZA(),a.qZA(),a.qZA()),2&t){const t=e.$implicit;a.xp6(1),a.hij(" ",t.ubicacion," ")}}function ie(t,e){1&t&&(a.TgZ(0,"th",13),a._uU(1," M\xe1s "),a.qZA())}function ne(t,e){1&t&&(a.TgZ(0,"td",14),a.TgZ(1,"button",17),a.TgZ(2,"mat-icon",16),a._uU(3,"reorder"),a.qZA(),a.qZA(),a.qZA())}function oe(t,e){1&t&&a._UZ(0,"tr",18)}function re(t,e){1&t&&a._UZ(0,"tr",19)}function ae(t,e){1&t&&(a.TgZ(0,"div",20),a._uU(1," No hay pedidos cancelados\n"),a.qZA())}function se(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"div",21),a.TgZ(1,"h4",22),a._uU(2,"Info del pedido"),a.qZA(),a.TgZ(3,"button",23),a.NdJ("click",function(){return a.CHM(t).$implicit.dismiss("Cross click")}),a.TgZ(4,"span",24),a._uU(5,"\xd7"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(6,"div",25),a.TgZ(7,"p"),a._uU(8,"Pedido: ID 1"),a.qZA(),a._uU(9," Detalle: Hamburguesa doble "),a._UZ(10,"br"),a._uU(11," Precio del pedido: $2.0 "),a._UZ(12,"br"),a._uU(13," Precio del encargo: $3.5 "),a.qZA()}}function ce(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"div",21),a.TgZ(1,"h4",22),a._uU(2,"Mapa"),a.qZA(),a.TgZ(3,"button",23),a.NdJ("click",function(){return a.CHM(t).$implicit.dismiss("Cross click")}),a.TgZ(4,"span",24),a._uU(5,"\xd7"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(6,"div",25),a.TgZ(7,"agm-map",26),a._UZ(8,"agm-marker",27),a.qZA(),a.qZA()}if(2&t){const t=a.oxw();a.xp6(7),a.Q6J("usePanning",!0)("latitude",t.lat)("longitude",t.lng)("zoom",12),a.xp6(1),a.Q6J("latitude",t.lat)("longitude",t.lng)("markerDraggable",!0)}}function de(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"div",21),a.TgZ(1,"h4",22),a._uU(2,"Info del pedido"),a.qZA(),a.TgZ(3,"button",23),a.NdJ("click",function(){return a.CHM(t).$implicit.dismiss("Cross click")}),a.TgZ(4,"span",24),a._uU(5,"\xd7"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(6,"div",25),a.TgZ(7,"p"),a._uU(8),a.qZA(),a.TgZ(9,"div",28),a.TgZ(10,"div",29),a.TgZ(11,"h5"),a.TgZ(12,"b"),a._uU(13,"Datos de la empresa: "),a.qZA(),a.qZA(),a.TgZ(14,"span"),a.TgZ(15,"b"),a._uU(16,"Nombre:"),a.qZA(),a._uU(17),a.qZA(),a.TgZ(18,"span"),a.TgZ(19,"b"),a._uU(20,"Ubicaci\xf3n:"),a.qZA(),a._uU(21),a.qZA(),a.TgZ(22,"span"),a.TgZ(23,"b"),a._uU(24,"Email:"),a.qZA(),a._uU(25),a.qZA(),a.TgZ(26,"span"),a.TgZ(27,"b"),a._uU(28,"Fecha del pedido:"),a.qZA(),a._uU(29),a.qZA(),a.TgZ(30,"span"),a.TgZ(31,"b"),a._uU(32,"Hora del pedido:"),a.qZA(),a._uU(33),a.qZA(),a.TgZ(34,"span"),a.TgZ(35,"b"),a._uU(36,"RUC:"),a.qZA(),a._uU(37),a.qZA(),a.TgZ(38,"span"),a.TgZ(39,"b"),a._uU(40,"Pago tipo:"),a.qZA(),a._uU(41),a.qZA(),a.TgZ(42,"span"),a.TgZ(43,"b"),a._uU(44,"Precio total:"),a.qZA(),a._uU(45),a.qZA(),a.qZA(),a.TgZ(46,"div",29),a.TgZ(47,"h5"),a.TgZ(48,"b"),a._uU(49,"Datos del cliente: "),a.qZA(),a.qZA(),a.TgZ(50,"span"),a.TgZ(51,"b"),a._uU(52,"ID del pedido:"),a.qZA(),a._uU(53),a.qZA(),a.TgZ(54,"span"),a.TgZ(55,"b"),a._uU(56,"Ubicaci\xf3n:"),a.qZA(),a._uU(57),a.qZA(),a.TgZ(58,"span"),a.TgZ(59,"b"),a._uU(60,"Descripci\xf3n:"),a.qZA(),a._uU(61),a.qZA(),a.TgZ(62,"span"),a.TgZ(63,"b"),a._uU(64,"Cliente:"),a.qZA(),a._uU(65),a.qZA(),a.TgZ(66,"span"),a.TgZ(67,"b"),a._uU(68,"C\xe9dula:"),a.qZA(),a._uU(69),a.qZA(),a.TgZ(70,"span"),a.TgZ(71,"b"),a._uU(72,"Precio del pedido:"),a.qZA(),a._uU(73),a.qZA(),a.TgZ(74,"span"),a.TgZ(75,"b"),a._uU(76,"Precio de env\xedo:"),a.qZA(),a._uU(77),a.qZA(),a.qZA(),a.qZA(),a.qZA()}if(2&t){const t=a.oxw();a.xp6(8),a.hij("ID pedido ",t.orderInfo.id,""),a.xp6(9),a.hij(" ",t.orderInfo.local.name,""),a.xp6(4),a.hij(" ",t.orderInfo.local.location_id.reference,""),a.xp6(4),a.hij(" ",t.orderInfo.local.email,""),a.xp6(4),a.hij(" ",t.orderInfo.start_time.slice(0,10),""),a.xp6(4),a.hij(" ",t.orderInfo.start_time.slice(11,19),""),a.xp6(4),a.hij(" ",t.orderInfo.local.ruc,""),a.xp6(4),a.hij(" ",t.orderInfo.is_paid?"Tarjeta":"Efectivo",""),a.xp6(4),a.hij(" $",t.orderInfo.price+t.orderInfo.delivery_price,""),a.xp6(8),a.hij(" ",t.orderInfo.id,""),a.xp6(4),a.hij(" ",t.orderInfo.destiny_loc.reference,""),a.xp6(4),a.hij(" ",t.orderInfo.details,""),a.xp6(4),a.AsE(" ",t.orderInfo.client.name," ",t.orderInfo.client.apellido,""),a.xp6(4),a.hij(" ",t.orderInfo.client.id_number,""),a.xp6(4),a.hij(" $",t.orderInfo.price,""),a.xp6(4),a.hij(" $",null!=t.orderInfo.delivery_price?t.orderInfo.delivery_price:0,"")}}let le=(()=>{class t{constructor(t,e,i){this.modalService=t,this.repoService=e,this.orderService=i,this.displayedColumns=["Id","restaurante","ubicacion","info"],this.dataSource=new f.by,this.dataCancelled=new f.by,this.closeResult="",this.getAllOrders=()=>{this.repoService.getData("api/orders/").subscribe(t=>{this.dataSource.data=t,this.orderService.saveOrderList(t);const e=[];this.dataSource.data.forEach((t,i)=>{null!==t.motorizado&&7===t.state&&e.push(t)}),this.dataCancelled=new f.by(e)})},this.getOrder=(t,e)=>{this.repoService.getData("api/orders/"+t+"/").toPromise().then(t=>{this.orderInfo=t,this.modalService.open(e,{ariaLabelledBy:"modal-basic-title"}).result.then(t=>{this.closeResult=`Closed with: ${t}`},t=>{this.closeResult=`Dismissed ${this.getDismissReason(t)}`})})}}ngOnInit(){}open(t,e){this.getOrder(e,t)}openMap(t,e,i){this.lat=i,this.lng=e,this.modalService.open(t,{ariaLabelledBy:"modal-basic-title"}).result.then(t=>{this.closeResult=`Closed with: ${t}`},t=>{this.closeResult=`Dismissed ${this.getDismissReason(t)}`})}getDismissReason(t){return t===A.If.ESC?"by pressing ESC":t===A.If.BACKDROP_CLICK?"by clicking on a backdrop":`with: ${t}`}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(A.FF),a.Y36(s.b),a.Y36(T))},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-canceled"]],decls:22,vars:4,consts:[["mat-table","",3,"dataSource"],["matColumnDef","Id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","restaurante"],["matColumnDef","ubicacion"],["matColumnDef","info"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["id","center",4,"ngIf"],["aux",""],["mymodal",""],["class","modal-content"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button",""],[1,"mat-18"],["mat-icon-button","","color","accent"],["mat-header-row",""],["mat-row",""],["id","center"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[3,"usePanning","latitude","longitude","zoom"],[3,"latitude","longitude","markerDraggable"],[1,"info-row"],[1,"info-col"]],template:function(t,e){1&t&&(a.TgZ(0,"table",0),a.ynx(1,1),a.YNc(2,Xt,2,0,"th",2),a.YNc(3,Kt,2,1,"td",3),a.BQk(),a.ynx(4,4),a.YNc(5,Gt,2,0,"th",2),a.YNc(6,Vt,2,1,"td",3),a.BQk(),a.ynx(7,5),a.YNc(8,te,2,0,"th",2),a.YNc(9,ee,5,1,"td",3),a.BQk(),a.ynx(10,6),a.YNc(11,ie,2,0,"th",2),a.YNc(12,ne,4,0,"td",3),a.BQk(),a.YNc(13,oe,1,0,"tr",7),a.YNc(14,re,1,0,"tr",8),a.qZA(),a.YNc(15,ae,2,0,"div",9),a.YNc(16,se,14,0,"ng-template",null,10,a.W1O),a.YNc(18,ce,9,7,"ng-template",null,11,a.W1O),a.YNc(20,de,78,17,"ng-template",12,10,a.W1O)),2&t&&(a.Q6J("dataSource",e.dataCancelled),a.xp6(13),a.Q6J("matHeaderRowDef",e.displayedColumns),a.xp6(1),a.Q6J("matRowDefColumns",e.displayedColumns),a.xp6(1),a.Q6J("ngIf",0===e.dataCancelled.data.length))},directives:[f.BZ,f.w1,f.fO,f.Dz,f.as,f.nj,n.O5,f.ge,f.ev,l.lW,g.Hw,f.XQ,f.Gk,q.SA,q.pt],styles:["table[_ngcontent-%COMP%]{padding:35px;border:35vh;margin:1vh;width:100%;overflow-x:auto;overflow-y:hidden;min-width:500px}th.mat-header-cell[_ngcontent-%COMP%]{text-align:left;max-width:50%;text-align:center!important}agm-map[_ngcontent-%COMP%]{height:300px}#aux[_ngcontent-%COMP%]{position:center}.info-row[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:200px}.info-row[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2em;padding:10px}.info-row[_ngcontent-%COMP%]{border:1px solid #000;display:grid;grid-template-columns:repeat(2,1fr)}.info-col[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-content:center;justify-content:flex-start}.modal-content[_ngcontent-%COMP%]{height:auto;min-height:100%!important;border-radius:0}"]}),t})();function ge(t,e){1&t&&(a._uU(0," En espera "),a._UZ(1,"br"))}function ue(t,e){1&t&&(a._uU(0," Asignados "),a._UZ(1,"br"))}function Ze(t,e){1&t&&(a._uU(0," Activos "),a._UZ(1,"br"))}function pe(t,e){1&t&&(a._uU(0," Entregados "),a._UZ(1,"br"))}function me(t,e){1&t&&(a._uU(0," Cancelados "),a._UZ(1,"br"))}let he=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-order"]],decls:20,vars:1,consts:[[1,"other-spacer"],[1,"text-center","my-3","py-3"],[1,"text-center","my-3","py-3",3,"selectedIndex"],["mat-tab-label",""]],template:function(t,e){1&t&&(a.TgZ(0,"section"),a._UZ(1,"span",0),a.TgZ(2,"h1",1),a._uU(3,"Informaci\xf3n de pedidos"),a.qZA(),a.TgZ(4,"mat-tab-group",2),a.TgZ(5,"mat-tab"),a.YNc(6,ge,2,0,"ng-template",3),a._UZ(7,"app-on-hold"),a.qZA(),a.TgZ(8,"mat-tab"),a.YNc(9,ue,2,0,"ng-template",3),a._UZ(10,"app-assigned"),a.qZA(),a.TgZ(11,"mat-tab"),a.YNc(12,Ze,2,0,"ng-template",3),a._UZ(13,"app-active"),a.qZA(),a.TgZ(14,"mat-tab"),a.YNc(15,pe,2,0,"ng-template",3),a._UZ(16,"app-delivered"),a.qZA(),a.TgZ(17,"mat-tab"),a.YNc(18,me,2,0,"ng-template",3),a._UZ(19,"app-canceled"),a.qZA(),a.qZA(),a.qZA()),2&t&&(a.xp6(4),a.Q6J("selectedIndex",0))},directives:[_.SP,_.uX,_.uD,Y,nt,St,Wt,le],styles:["[_nghost-%COMP%]     .mat-tab-label{width:100%;justify-content:center}mat-tab-group[_ngcontent-%COMP%]{width:calc(100vw - 350px)}"]}),t})(),_e=(()=>{class t{constructor(t){this.db=t,this.dbPath="/motorizados",this.locationsRef=t.collection(this.dbPath)}getAll(){return this.locationsRef}}return t.\u0275fac=function(e){return new(e||t)(a.LFG(st.ST))},t.\u0275prov=a.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var fe=i(171),Ae=i(3738);function Te(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"div",9),a.TgZ(1,"h4",10),a._uU(2,"Datos"),a.qZA(),a.TgZ(3,"button",11),a.NdJ("click",function(){return a.CHM(t).$implicit.dismiss("Cross click")}),a.TgZ(4,"span",12),a._uU(5,"\xd7"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(6,"div",13),a.TgZ(7,"div",14),a.TgZ(8,"div",14),a.TgZ(9,"div",15),a._UZ(10,"img",16),a.TgZ(11,"div",14),a.TgZ(12,"span"),a.TgZ(13,"strong"),a._uU(14,"Nombre: "),a.qZA(),a._uU(15),a.qZA(),a.TgZ(16,"span"),a.TgZ(17,"strong"),a._uU(18,"Estado: "),a.qZA(),a._uU(19),a.qZA(),a.TgZ(20,"span"),a.TgZ(21,"strong"),a._uU(22,"Ubicaci\xf3n: "),a.qZA(),a._uU(23),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(24,"div",17),a.TgZ(25,"button",18),a.NdJ("click",function(){return a.CHM(t),a.oxw(2).assingAndChangeMotoState()}),a._uU(26," Asignar "),a.qZA(),a.TgZ(27,"button",19),a.NdJ("click",function(){return a.CHM(t).$implicit.dismiss("Cross click")}),a._uU(28," Cancelar "),a.qZA(),a.qZA(),a.qZA(),a.qZA()}if(2&t){const t=a.oxw(2);a.xp6(10),a.s9C("src",t.motorizado.user_id.profile_pic,a.LSH),a.xp6(5),a.hij("",t.motorizado.user_id.first_name+" "+t.motorizado.user_id.last_name," "),a.xp6(4),a.hij("",t.motorizado.is_busy?"No Disponible":"Disponible"," "),a.xp6(4),a.hij("",t.motorizado.user_id.home_loc.reference," ")}}function qe(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"div"),a._UZ(1,"mat-card",1),a.TgZ(2,"div",2),a.TgZ(3,"div",3),a.TgZ(4,"mat-card-header"),a._UZ(5,"img",4),a.TgZ(6,"mat-card-title"),a._uU(7),a.qZA(),a.TgZ(8,"mat-card-subtitle"),a._uU(9),a.qZA(),a.qZA(),a.qZA(),a.TgZ(10,"mat-card-header"),a.TgZ(11,"mat-card-title"),a._uU(12),a.qZA(),a.TgZ(13,"mat-card-subtitle"),a._uU(14),a.qZA(),a.qZA(),a.TgZ(15,"button",5),a._uU(16),a.qZA(),a.TgZ(17,"button",6),a.TgZ(18,"mat-icon"),a._uU(19,"chat"),a.qZA(),a.qZA(),a.TgZ(20,"button",7),a.NdJ("click",function(){a.CHM(t);const e=a.MAs(23);return a.oxw().open(e)}),a._uU(21," Asignar "),a.qZA(),a.qZA(),a.YNc(22,Te,29,4,"ng-template",null,8,a.W1O),a.qZA()}if(2&t){const t=a.oxw();a.xp6(5),a.s9C("src",t.motorizado.user_id.profile_pic,a.LSH),a.xp6(2),a.AsE("",t.motorizado.user_id.first_name," ",t.motorizado.user_id.last_name,""),a.xp6(2),a.hij("ID: ",t.motorizado.user_id.id,""),a.xp6(3),a.hij(" ",t.motorizado.user_id.home_loc.reference," "),a.xp6(2),a.hij(" ",t.motorizado.user_id.home_loc.reference," "),a.xp6(1),a.s9C("color",t.motorizado.is_busy?"warn":"primary"),a.xp6(1),a.hij(" ",t.motorizado.is_busy?"NO DISPONIBLE":"DISPONIBLE"," ")}}let be=(()=>{class t{constructor(t,e,i,n){this.modalService=t,this.repoService=e,this.orderService=i,this.chatService=n,this.motorizado={},this._allMotorizados="api/mot_user",this.closeResult="",this.mostrar=!1,this.getMotorizado=()=>{this.repoService.getData(this._allMotorizados+"/"+this.motorizadoID+"/").toPromise().then(t=>{this.motorizado=t,this.mostrar=!0})}}ngOnInit(){var t=this;return(0,ot.Z)(function*(){yield t.getMotorizado()})()}open(t){this.modalService.open(t,{ariaLabelledBy:"modal-basic-title"}).result.then(t=>{this.closeResult=`Closed with: ${t}`},t=>{this.closeResult=`Dismissed ${this.getDismissReason(t)}`})}getDismissReason(t){return t===A.If.ESC?"by pressing ESC":t===A.If.BACKDROP_CLICK?"by clicking on a backdrop":`with: ${t}`}assingAndChangeMotoState(){this.repoService.updatePatch(`api/order/assign/${this.orderService.getOrder().id}`,{motorizado:this.motorizado.user_id.id,operador:this.chatService.idOperador}).subscribe(t=>{this.orderService.getOrder().state=2,this.motorizado.is_busy=!0,this.modalService.dismissAll()})}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(A.FF),a.Y36(s.b),a.Y36(T),a.Y36(ct))},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-user-element"]],inputs:{motorizadoID:"motorizadoID"},decls:1,vars:1,consts:[[4,"ngIf"],[2,"display","none"],[1,"user-element"],[1,"avatar-photo"],["mat-card-avatar","",3,"src"],["mat-raised-button","",3,"color"],["mat-icon-button",""],["mat-raised-button","","color","accent",3,"click"],["mymodal",""],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"info-col"],[1,"info-row"],["alt","",3,"src"],[1,"info-row","butons-info"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","warn",3,"click"]],template:function(t,e){1&t&&a.YNc(0,qe,24,8,"div",0),2&t&&a.Q6J("ngIf",e.mostrar)},directives:[n.O5,Ae.a8,Ae.dk,Ae.kc,Ae.n5,Ae.$j,l.lW,g.Hw],styles:[".user-element[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 1fr 1fr 1fr;align-items:center;justify-items:center;padding:10px}.avatar-photo[_ngcontent-%COMP%]{justify-self:baseline}.info-row[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:200px}.info-row[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2em;padding:10px}.info-col[_ngcontent-%COMP%], .info-row[_ngcontent-%COMP%]{display:flex}.info-col[_ngcontent-%COMP%]{flex-direction:column;align-content:center}.butons-info[_ngcontent-%COMP%]{justify-content:center}.butons-info[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:10px}"]}),t})();function Ue(t,e){if(1&t&&(a.TgZ(0,"agm-marker",8),a.TgZ(1,"agm-info-window",null,6),a._uU(3),a._UZ(4,"br"),a.qZA(),a.qZA()),2&t){const t=e.$implicit;a.Q6J("latitude",t.lat)("longitude",t.lng)("markerDraggable",!1),a.xp6(3),a.hij(" ID: ",t.id,"")}}function xe(t,e){1&t&&a._UZ(0,"app-user-element",9),2&t&&a.Q6J("motorizadoID",e.$implicit.id)}let Ce=(()=>{class t{constructor(t,e,i){this.repoService=t,this.orderService=e,this.firestoreService=i,this._allMotorizados="api/mot_user/",this.panelOpenState=!1,this.labelOptions={color:"#ee4646",fontFamily:"",fontSize:"10px",fontWeight:"bold",letterSpacing:"0.5px",text:"Plan Pagado/No pagado"},this.listMotorizados=[],this.listOrders=[],this.listMotorizadosRealTime=[],this.currentLat=-2.2175001,this.currentLong=-79.9092901,this.iconLocal={url:"https://despachomotorizado.pythonanywhere.com/media/images/icon/store.svg",scaledSize:{width:40,height:60}},this.iconDestino={url:"https://despachomotorizado.pythonanywhere.com/media/images/icon/flag.svg",scaledSize:{width:40,height:60}},this.iconMotorizado={url:"../../../assets/car.svg",scaledSize:{width:40,height:60}},this.getMotorizadosRealTime=()=>{this.firestoreService.getAll().snapshotChanges().pipe((0,at.U)(t=>t.map(t=>({id:t.payload.doc.id,lat:t.payload.doc.data().lat,lng:t.payload.doc.data().lng})))).subscribe(t=>{this.listMotorizadosRealTime=t,console.log(this.listMotorizadosRealTime)})}}ngOnInit(){this.getMotorizadosRealTime(),this.listOrders=this.orderService.getOrderList(),0===this.listOrders.length?this.repoService.getData("api/orders/").subscribe(t=>{this.orderService.saveOrderList(t),this.listOrders=this.orderService.getOrderList(),void 0===this.orderService.getOrder()&&this.listOrders.length>0&&(this.orderService.saveOrder(this.listOrders[0]),this.currentOrder=this.listOrders[0])}):(this.currentOrder=this.orderService.getOrder(),this.currentLat=this.currentOrder.local.location_id.latitude,this.currentLong=this.currentOrder.local.location_id.longitude,this.currentDesLong=this.currentOrder.destiny_loc.longitude,this.currentDestLat=this.currentOrder.destiny_loc.latitude)}ngAfterViewInit(){this.repoService.getData(this._allMotorizados).toPromise().then(t=>{this.listMotorizados=t})}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(s.b),a.Y36(T),a.Y36(_e))},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-assignation"]],decls:58,vars:27,consts:[[1,"text-center","my-3","py-3"],[1,"tilefix"],[3,"opened","closed"],[3,"usePanning","latitude","longitude","zoom"],[3,"latitude","longitude","markerDraggable",4,"ngFor","ngForOf"],[3,"latitude","longitude","markerDraggable","iconUrl"],["infoWindow",""],[3,"motorizadoID",4,"ngFor","ngForOf"],[3,"latitude","longitude","markerDraggable"],[3,"motorizadoID"]],template:function(t,e){1&t&&(a.TgZ(0,"h2",0),a._uU(1,"Asignaci\xf3n de pedidos"),a.qZA(),a.TgZ(2,"div",1),a.TgZ(3,"mat-expansion-panel",2),a.NdJ("opened",function(){return e.panelOpenState=!0})("closed",function(){return e.panelOpenState=!1}),a.TgZ(4,"mat-expansion-panel-header"),a.TgZ(5,"mat-panel-title"),a._uU(6," DATOS DEL PEDIDO "),a.qZA(),a.TgZ(7,"mat-panel-description"),a._uU(8),a.qZA(),a.qZA(),a.TgZ(9,"p"),a._uU(10),a.qZA(),a.qZA(),a.TgZ(11,"agm-map",3),a.YNc(12,Ue,5,4,"agm-marker",4),a.TgZ(13,"agm-marker",5),a.TgZ(14,"agm-info-window",null,6),a.TgZ(16,"b"),a._uU(17,"Empresa:"),a.qZA(),a._uU(18),a._UZ(19,"br"),a.TgZ(20,"b"),a._uU(21,"Ubicaci\xf3n:"),a.qZA(),a._uU(22),a._UZ(23,"br"),a.TgZ(24,"b"),a._uU(25,"Fecha del pedido:"),a.qZA(),a._uU(26),a._UZ(27,"br"),a.TgZ(28,"b"),a._uU(29,"Hora del pedido: "),a.qZA(),a._uU(30),a._UZ(31,"br"),a.qZA(),a.qZA(),a.TgZ(32,"agm-marker",5),a.TgZ(33,"agm-info-window",null,6),a.TgZ(35,"b"),a._uU(36,"Cliente:"),a.qZA(),a._uU(37),a._UZ(38,"br"),a.TgZ(39,"b"),a._uU(40,"Ubicaci\xf3n:"),a.qZA(),a._uU(41),a._UZ(42,"br"),a.TgZ(43,"b"),a._uU(44,"Descripci\xf3n:"),a.qZA(),a._uU(45),a._UZ(46,"br"),a.TgZ(47,"b"),a._uU(48,"Subtotal: "),a.qZA(),a._uU(49),a.TgZ(50,"b"),a._uU(51,"Env\xedo: "),a.qZA(),a._uU(52),a._UZ(53,"br"),a.TgZ(54,"b"),a._uU(55,"Total: "),a.qZA(),a._uU(56),a.qZA(),a.qZA(),a.qZA(),a.YNc(57,xe,1,1,"app-user-element",7),a.qZA()),2&t&&(a.xp6(8),a.hij(" ",e.panelOpenState?"Pedido por asignar":"ID del pedido: "+e.currentOrder.id," "),a.xp6(2),a.hij(" ID de la orden: ",e.currentOrder.id,""),a.xp6(1),a.Q6J("usePanning",!0)("latitude",e.currentLat)("longitude",e.currentLong)("zoom",15),a.xp6(1),a.Q6J("ngForOf",e.listMotorizadosRealTime),a.xp6(1),a.Q6J("latitude",e.currentLat)("longitude",e.currentLong)("markerDraggable",!1)("iconUrl",e.iconLocal),a.xp6(5),a.hij(" ",e.currentOrder.local.name,""),a.xp6(4),a.hij(" ",e.currentOrder.local.location_id.reference,""),a.xp6(4),a.hij(" ",e.currentOrder.start_time.slice(0,10),""),a.xp6(4),a.Oqu(e.currentOrder.start_time.slice(11,19)),a.xp6(2),a.Q6J("latitude",e.currentDestLat)("longitude",e.currentDesLong)("markerDraggable",!1)("iconUrl",e.iconDestino),a.xp6(5),a.AsE(" ",e.currentOrder.client.name," ",e.currentOrder.client.apellido,""),a.xp6(4),a.hij(" ",e.currentOrder.destiny_loc.reference,""),a.xp6(4),a.hij(" ",e.currentOrder.details,""),a.xp6(4),a.hij("$",e.currentOrder.price," "),a.xp6(3),a.hij("$",null!=e.currentOrder.delivery_price?e.currentOrder.delivery_price:0,""),a.xp6(4),a.hij("$",e.currentOrder.price+e.currentOrder.delivery_price," "),a.xp6(1),a.Q6J("ngForOf",e.listMotorizadosRealTime))},directives:[fe.ib,fe.yz,fe.yK,fe.u4,q.SA,n.sg,q.pt,q.d,be],styles:[".mat-form-field[_ngcontent-%COMP%] + .mat-form-field[_ngcontent-%COMP%]{margin-left:8px}agm-map[_ngcontent-%COMP%]{height:300px}.mat-expansion-panel[_ngcontent-%COMP%], agm-map[_ngcontent-%COMP%]{width:100%}"]}),t})();function ve(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"div",13),a.TgZ(1,"h4",14),a._uU(2,"Datos"),a.qZA(),a.TgZ(3,"button",15),a.NdJ("click",function(){return a.CHM(t).$implicit.dismiss("Cross click")}),a.TgZ(4,"span",16),a._uU(5,"\xd7"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(6,"div",17),a.TgZ(7,"div",18),a.TgZ(8,"div",18),a.TgZ(9,"div",19),a._UZ(10,"img",20),a.TgZ(11,"div",18),a.TgZ(12,"p"),a.TgZ(13,"strong"),a._uU(14,"Nombre: "),a.qZA(),a._uU(15),a.qZA(),a.TgZ(16,"p"),a.TgZ(17,"strong"),a._uU(18,"Estado: "),a.qZA(),a._uU(19),a.qZA(),a.TgZ(20,"p"),a.TgZ(21,"strong"),a._uU(22,"Ubicaci\xf3n: "),a.qZA(),a._uU(23),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(24,"div",21),a.TgZ(25,"button",22),a.NdJ("click",function(){return a.CHM(t),a.oxw().revokeAndChangeMotoState()}),a._uU(26," Revocar "),a.qZA(),a.TgZ(27,"button",11),a.NdJ("click",function(){return a.CHM(t).$implicit.dismiss("Cross click")}),a._uU(28," Cancelar "),a.qZA(),a.qZA(),a.qZA(),a.qZA()}if(2&t){const t=a.oxw();a.xp6(10),a.s9C("src",t.currentMotorizado.user_id.profile_pic,a.LSH),a.xp6(5),a.hij("",t.currentMotorizado.user_id.first_name+" "+t.currentMotorizado.user_id.last_name," "),a.xp6(4),a.hij("",t.currentMotorizado.is_busy?"No Disponible":"Disponible"," "),a.xp6(4),a.hij("",t.currentMotorizado.user_id.home_loc.reference," ")}}let Oe=(()=>{class t{constructor(t,e,i,n){this.modalService=t,this.repoService=e,this.orderService=i,this.router=n,this._Motorizado="api/mot_user/",this.closeResult="",this.labelOptions={color:"#ee4646",fontFamily:"",fontSize:"10px",fontWeight:"bold",letterSpacing:"0.5px",text:"Plan Pagado/No pagado"},this.listMotorizados=[],this.listOrders=[],this.lat=-2.1635416501108216,this.long=-79.8976126219511,this.currentLat=-2.2175001,this.currentLong=-79.9092901,this.iconLocal={url:"https://despachomotorizado.pythonanywhere.com/media/images/icon/store.svg",scaledSize:{width:40,height:60}},this.iconDestino={url:"https://despachomotorizado.pythonanywhere.com/media/images/icon/flag.svg",scaledSize:{width:40,height:60}},this.iconMotorizado={url:"../../../assets/car.svg",scaledSize:{width:40,height:60}}}ngOnInit(){this.listOrders=this.orderService.getOrderList(),0===this.listOrders.length?this.repoService.getData("api/orders/").subscribe(t=>{this.orderService.saveOrderList(t),this.listOrders=this.orderService.getOrderList(),void 0===this.orderService.getOrder()&&this.listOrders.length>0&&(this.orderService.saveOrder(this.listOrders[0]),this.currentOrder=this.listOrders[0])}):(this.currentOrder=this.orderService.getOrder(),this.currentMotorizado=this.orderService.getOrder().motorizado,this.currentLat=this.currentOrder.local.location_id.latitude,this.currentLong=this.currentOrder.local.location_id.longitude,this.currentDesLong=this.currentOrder.destiny_loc.longitude,this.currentDestLat=this.currentOrder.destiny_loc.latitude)}ngAfterViewInit(){}open(t){this.modalService.open(t,{ariaLabelledBy:"modal-basic-title"}).result.then(t=>{this.closeResult=`Closed with: ${t}`},t=>{this.closeResult=`Dismissed ${this.getDismissReason(t)}`})}getDismissReason(t){return t===A.If.ESC?"by pressing ESC":t===A.If.BACKDROP_CLICK?"by clicking on a backdrop":`with: ${t}`}revokeAndChangeMotoState(){this.repoService.updatePatch(`api/order/revoke/${this.orderService.getOrder().id}`,{}).subscribe(t=>{this.orderService.getOrder().state=1,alert("Se ha revocado al motorizado exitosamente"),this.modalService.dismissAll(),this.router.navigate(["/order"])})}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(A.FF),a.Y36(s.b),a.Y36(T),a.Y36(o.F0))},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-revoke"]],decls:32,vars:23,consts:[[1,"text-center","my-3","py-3"],[1,"tilefix"],[3,"usePanning","latitude","longitude","zoom"],[3,"latitude","longitude","markerDraggable"],[3,"latitude","longitude","markerDraggable","iconUrl"],[2,"display","none"],[1,"user-element"],[1,"avatar-photo"],["mat-card-avatar","",3,"src"],["mat-raised-button","",3,"color"],["mat-icon-button",""],["mat-raised-button","","color","warn",3,"click"],["mymodal",""],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"info-col"],[1,"info-row"],["alt","",3,"src"],[1,"info-row","butons-info"],["mat-raised-button","","color","primary",3,"click"]],template:function(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"h2",0),a._uU(1,"Revocar pedidos"),a.qZA(),a.TgZ(2,"div",1),a.TgZ(3,"h6"),a._uU(4),a.qZA(),a.TgZ(5,"agm-map",2),a._UZ(6,"agm-marker",3),a._UZ(7,"agm-marker",4),a._UZ(8,"agm-marker",4),a.qZA(),a._UZ(9,"mat-card",5),a.TgZ(10,"div",6),a.TgZ(11,"div",7),a.TgZ(12,"mat-card-header"),a._UZ(13,"img",8),a.TgZ(14,"mat-card-title"),a._uU(15),a.qZA(),a.TgZ(16,"mat-card-subtitle"),a._uU(17),a.qZA(),a.qZA(),a.qZA(),a.TgZ(18,"mat-card-header"),a.TgZ(19,"mat-card-title"),a._uU(20),a.qZA(),a.TgZ(21,"mat-card-subtitle"),a._uU(22),a.qZA(),a.qZA(),a.TgZ(23,"button",9),a._uU(24),a.qZA(),a.TgZ(25,"button",10),a.TgZ(26,"mat-icon"),a._uU(27,"chat"),a.qZA(),a.qZA(),a.TgZ(28,"button",11),a.NdJ("click",function(){a.CHM(t);const i=a.MAs(31);return e.open(i)}),a._uU(29," REVOCAR "),a.qZA(),a.qZA(),a.YNc(30,ve,29,4,"ng-template",null,12,a.W1O),a.qZA()}2&t&&(a.xp6(4),a.hij(" Pedido: ",e.currentOrder.id," "),a.xp6(1),a.Q6J("usePanning",!0)("latitude",e.currentLat)("longitude",e.currentLong)("zoom",15),a.xp6(1),a.Q6J("latitude",e.lat)("longitude",e.long)("markerDraggable",!1),a.xp6(1),a.Q6J("latitude",e.currentLat)("longitude",e.currentLong)("markerDraggable",!1)("iconUrl",e.iconLocal),a.xp6(1),a.Q6J("latitude",e.currentDestLat)("longitude",e.currentDesLong)("markerDraggable",!1)("iconUrl",e.iconDestino),a.xp6(5),a.s9C("src",e.currentMotorizado.user_id.profile_pic,a.LSH),a.xp6(2),a.Oqu(e.currentMotorizado.user_id.first_name+" "+e.currentMotorizado.user_id.last_name),a.xp6(2),a.Oqu(e.currentMotorizado.is_busy?"NO DISPONIBLE":"DISPONIBLE"),a.xp6(3),a.hij(" ",e.currentMotorizado.user_id.home_loc.reference," "),a.xp6(2),a.hij(" ",e.currentMotorizado.user_id.home_loc.reference," "),a.xp6(1),a.s9C("color",e.currentMotorizado.is_busy?"warn":"primary"),a.xp6(1),a.hij(" ",e.currentMotorizado.is_busy?"NO DISPONIBLE":"DISPONIBLE"," "))},directives:[q.SA,q.pt,Ae.a8,Ae.dk,Ae.kc,Ae.n5,Ae.$j,l.lW,g.Hw],styles:[".mat-form-field[_ngcontent-%COMP%] + .mat-form-field[_ngcontent-%COMP%]{margin-left:8px}agm-map[_ngcontent-%COMP%]{margin-left:auto!important;margin-right:auto!important;align-self:center!important;height:300px}.mat-expansion-panel[_ngcontent-%COMP%], agm-map[_ngcontent-%COMP%]{width:100%}.user-element[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 1fr 1fr 1fr;align-items:center;justify-items:center;padding:10px}.avatar-photo[_ngcontent-%COMP%]{justify-self:baseline}.info-row[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:200px}.info-row[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2em;padding:10px}.info-col[_ngcontent-%COMP%], .info-row[_ngcontent-%COMP%]{display:flex}.info-col[_ngcontent-%COMP%]{flex-direction:column;align-content:center}.butons-info[_ngcontent-%COMP%]{justify-content:center}.butons-info[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:10px}"]}),t})();function Me(t,e){if(1&t&&(a.TgZ(0,"div",13),a.TgZ(1,"div",14),a.TgZ(2,"div",15),a.TgZ(3,"span"),a.TgZ(4,"strong"),a._uU(5,"Detalles del pedido: "),a.qZA(),a._uU(6),a.qZA(),a.TgZ(7,"span"),a.TgZ(8,"strong"),a._uU(9,"Nombre cliente: "),a.qZA(),a._uU(10,"Cliente 1 "),a.qZA(),a.TgZ(11,"span"),a.TgZ(12,"strong"),a._uU(13,"Fecha del pedido: "),a.qZA(),a._uU(14),a.qZA(),a.TgZ(15,"span"),a.TgZ(16,"strong"),a._uU(17,"Fecha de asignaci\xf3n: "),a.qZA(),a._uU(18),a.qZA(),a.qZA(),a.TgZ(19,"div",15),a.TgZ(20,"span"),a.TgZ(21,"strong"),a._uU(22,"Tipo de pago: "),a.qZA(),a._uU(23),a.qZA(),a.TgZ(24,"span"),a.TgZ(25,"strong"),a._uU(26,"Ubicaci\xf3n: "),a.qZA(),a._uU(27),a.qZA(),a.TgZ(28,"span"),a.TgZ(29,"strong"),a._uU(30,"Precio: "),a.qZA(),a._uU(31),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&t){const t=e.$implicit,i=a.oxw(2);a.xp6(6),a.hij("",t.details," "),a.xp6(8),a.hij("",t.start_time," "),a.xp6(4),a.hij("",t.mot_assigned_time," "),a.xp6(5),a.hij("",t.is_paid?"En efectivo":"Tarjeta de credito"," "),a.xp6(4),a.hij("",i.motorizado.user_id.home_loc.reference," "),a.xp6(4),a.hij("$",t.price," ")}}function ye(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"div",7),a.TgZ(1,"h4",8),a._uU(2),a.qZA(),a.TgZ(3,"button",9),a.NdJ("click",function(){return a.CHM(t).$implicit.dismiss("Cross click")}),a.TgZ(4,"span",10),a._uU(5,"\xd7"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(6,"div",11),a.YNc(7,Me,32,6,"div",12),a.qZA()}if(2&t){const t=a.oxw();a.xp6(2),a.hij("\xd3rdenes activas - ",t.motorizado.user_id.first_name+" "+t.motorizado.user_id.last_name,""),a.xp6(5),a.Q6J("ngForOf",t.listOrders)}}let we=(()=>{class t{constructor(t,e){this.modalService=t,this.repoService=e,this._allOrders="api/order_by_mot/active/",this.closeResult="",this.listOrders=[],this.getOrdersbyMotorizado=()=>{this.repoService.getData(this._allOrders+""+this.motorizado.user_id.id).toPromise().then(t=>{this.listOrders=t})}}ngOnInit(){this.getOrdersbyMotorizado()}open(t){null==this.listOrders?alert("Este motorizado no tiene \xf3rdenes activas"):this.modalService.open(t,{ariaLabelledBy:"modal-basic-title"}).result.then(t=>{this.closeResult=`Closed with: ${t}`},t=>{this.closeResult=`Dismissed ${this.getDismissReason(t)}`})}getDismissReason(t){return t===A.If.ESC?"by pressing ESC":t===A.If.BACKDROP_CLICK?"by clicking on a backdrop":`with: ${t}`}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(A.FF),a.Y36(s.b))},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-orders-motorizado"]],inputs:{motorizado:"motorizado"},decls:23,vars:8,consts:[[2,"display","none"],[1,"user-element"],[1,"avatar-photo"],["mat-card-avatar","",3,"src"],["mat-raised-button","",3,"color"],["id","bttnOrdenes","mat-raised-button","","color","accent",3,"click"],["mymodal",""],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],["class","ordenes",4,"ngFor","ngForOf"],[1,"ordenes"],[1,"info-row"],[1,"info-col"]],template:function(t,e){if(1&t){const t=a.EpF();a._UZ(0,"mat-card",0),a.TgZ(1,"div",1),a.TgZ(2,"div",2),a.TgZ(3,"mat-card-header"),a._UZ(4,"img",3),a.TgZ(5,"mat-card-title"),a._uU(6),a.qZA(),a.TgZ(7,"mat-card-subtitle"),a._uU(8),a.qZA(),a.qZA(),a.qZA(),a.TgZ(9,"mat-card-header"),a.TgZ(10,"mat-card-title"),a._uU(11),a.qZA(),a.TgZ(12,"mat-card-subtitle"),a._uU(13),a.qZA(),a.qZA(),a.TgZ(14,"mat-card-header"),a.TgZ(15,"mat-card-subtitle"),a._uU(16),a.qZA(),a.qZA(),a.TgZ(17,"button",4),a._uU(18),a.qZA(),a.TgZ(19,"button",5),a.NdJ("click",function(){a.CHM(t);const i=a.MAs(22);return e.open(i)}),a._uU(20," Ver ordenes "),a.qZA(),a.qZA(),a.YNc(21,ye,8,2,"ng-template",null,6,a.W1O)}2&t&&(a.xp6(4),a.s9C("src",e.motorizado.user_id.profile_pic,a.LSH),a.xp6(2),a.Oqu(e.motorizado.user_id.first_name+" "+e.motorizado.user_id.last_name),a.xp6(2),a.Oqu(e.motorizado.is_busy?"NO DISPONIBLE":"DISPONIBLE"),a.xp6(3),a.hij(" ",e.motorizado.user_id.home_loc.reference," "),a.xp6(2),a.hij(" ",e.motorizado.user_id.home_loc.reference," "),a.xp6(3),a.hij(" ",e.motorizado.isOnline?"Conectado a internet":"Sin conexi\xf3n a internet"," "),a.xp6(1),a.s9C("color",e.motorizado.is_busy?"warn":"primary"),a.xp6(1),a.hij(" ",e.motorizado.is_busy?"NO DISPONIBLE":"DISPONIBLE"," "))},directives:[Ae.a8,Ae.dk,Ae.kc,Ae.n5,Ae.$j,l.lW,n.sg],styles:[".user-element[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 1fr 1fr 1fr;align-items:center;justify-items:center;padding:10px;background-color:#f7fafc;border-color:#000}.avatar-photo[_ngcontent-%COMP%]{justify-self:baseline}.info-row[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:200px}.info-row[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2em;padding:10px}.info-row[_ngcontent-%COMP%]{border:1px solid #000;display:flex}.info-col[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-content:center}.butons-info[_ngcontent-%COMP%]{justify-content:center}.butons-info[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:10px}.email[_ngcontent-%COMP%]{size:10px}"]}),t})();function Ie(t,e){if(1&t&&(a.TgZ(0,"agm-marker",5),a.TgZ(1,"agm-info-window",null,6),a._uU(3),a._UZ(4,"br"),a._uU(5),a._UZ(6,"img",7),a.qZA(),a.qZA()),2&t){const t=e.$implicit;a.Q6J("latitude",t.user_id.home_loc.latitude)("longitude",t.user_id.home_loc.longitude)("markerDraggable",!1),a.xp6(3),a.hij(" ID: ",t.user_id.id,""),a.xp6(2),a.AsE(" ",t.user_id.first_name," ",t.user_id.last_name," "),a.xp6(1),a.s9C("src",t.user_id.profile_pic,a.LSH)}}function Pe(t,e){1&t&&a._UZ(0,"app-orders-motorizado",8),2&t&&a.Q6J("motorizado",e.$implicit)}function De(t,e){if(1&t&&(a.TgZ(0,"agm-marker",7),a.TgZ(1,"agm-info-window",null,8),a._uU(3),a.qZA(),a.qZA()),2&t){const t=e.$implicit;a.Q6J("latitude",t.locations[0].location.latitude)("longitude",t.locations[0].location.longitude)("markerDraggable",!1),a.xp6(3),a.AsE(" ",t.name," ",t.apellido," ")}}function ke(t,e){if(1&t&&(a.TgZ(0,"div",9),a.TgZ(1,"mat-card-header"),a.TgZ(2,"mat-card-title"),a._uU(3),a.qZA(),a.qZA(),a.TgZ(4,"mat-card-header"),a.TgZ(5,"mat-card-title"),a._uU(6),a.qZA(),a.qZA(),a.TgZ(7,"mat-card-header"),a.TgZ(8,"mat-card-title"),a._uU(9),a.qZA(),a.qZA(),a.TgZ(10,"mat-card-header"),a.TgZ(11,"mat-card-title"),a._uU(12),a.qZA(),a.qZA(),a.qZA()),2&t){const t=e.$implicit;a.xp6(3),a.AsE("",t.name," ",t.apellido,""),a.xp6(3),a.hij(" ",t.email," "),a.xp6(3),a.hij(" ",null!=t.locations[0]?t.locations[0].location.reference:"No hay registro"," "),a.xp6(3),a.hij(" ",t.id_number," ")}}function Se(t,e){1&t&&(a.TgZ(0,"div",10),a._uU(1," No hay clientes registrados "),a.qZA())}function Ne(t,e){if(1&t&&(a.TgZ(0,"div",5),a.TgZ(1,"div",6),a.TgZ(2,"mat-card-header"),a._UZ(3,"img",7),a.TgZ(4,"mat-card-title"),a._uU(5),a.qZA(),a.qZA(),a.qZA(),a.TgZ(6,"mat-card-header"),a.TgZ(7,"mat-card-title"),a._uU(8),a.qZA(),a.qZA(),a.TgZ(9,"mat-card-header"),a.TgZ(10,"mat-card-title"),a._uU(11),a.qZA(),a.qZA(),a.TgZ(12,"mat-card-header"),a._UZ(13,"mat-card-title"),a.TgZ(14,"mat-card-subtitle"),a._uU(15),a.qZA(),a.qZA(),a.qZA()),2&t){const t=e.$implicit;a.xp6(3),a.s9C("src",t.logo_img,a.LSH),a.xp6(2),a.Oqu(t.name),a.xp6(3),a.hij(" ",t.ruc," "),a.xp6(3),a.hij(" ",t.location_id.reference," "),a.xp6(4),a.Oqu(t.email)}}function je(t,e){1&t&&(a.TgZ(0,"div",8),a._uU(1,"\nNo hay locales registrados\n"),a.qZA())}const ze=[{path:"",component:h,children:[{path:"",redirectTo:"order",pathMatch:"full"},{path:"assignation",component:Ce},{path:"revoke",component:Oe},{path:"order",component:he},{path:"motorizados",component:(()=>{class t{constructor(t,e){this.repoService=t,this.firestoreService=e,this._allMotorizados="api/motorizado",this.listMotorizados=[],this.currentLat=-2.2175001,this.currentLong=-79.9092901,this.listMotorizadosRealTime=[],this.getAllMotorizados=()=>{this.repoService.getData(this._allMotorizados).toPromise().then(t=>{this.listMotorizados=t})},this.getMotorizadosRealTime=()=>{this.firestoreService.getAll().snapshotChanges().pipe((0,at.U)(t=>t.map(t=>({id:t.payload.doc.id,lat:t.payload.doc.data().lat,lng:t.payload.doc.data().lng})))).subscribe(t=>{this.listMotorizadosRealTime=t})}}ngOnInit(){this.getAllMotorizados(),this.getMotorizadosRealTime()}changeInt(t){return parseInt(t)}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(s.b),a.Y36(_e))},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-list-motorizado"]],decls:26,vars:6,consts:[[1,"text-center","my-3","py-3"],[3,"usePanning","latitude","longitude","zoom"],[3,"latitude","longitude","markerDraggable",4,"ngFor","ngForOf"],[1,"user-element"],[3,"motorizado",4,"ngFor","ngForOf"],[3,"latitude","longitude","markerDraggable"],["infoWindow",""],["mat-card-avatar","",1,"avatar-photo",3,"src"],[3,"motorizado"]],template:function(t,e){1&t&&(a.TgZ(0,"h1",0),a._uU(1,"Pedidos de los motorizados"),a.qZA(),a.TgZ(2,"h5"),a._uU(3,"Ubicaci\xf3n en mapa"),a.qZA(),a.TgZ(4,"agm-map",1),a.YNc(5,Ie,7,7,"agm-marker",2),a.qZA(),a._UZ(6,"br"),a.TgZ(7,"h5"),a._uU(8,"Lista"),a.qZA(),a.TgZ(9,"div",3),a.TgZ(10,"mat-card-header"),a.TgZ(11,"mat-card-title"),a._uU(12,"Nombre"),a.qZA(),a.qZA(),a.TgZ(13,"mat-card-header"),a.TgZ(14,"mat-card-title"),a._uU(15," Ubicaci\xf3n "),a.qZA(),a.qZA(),a.TgZ(16,"mat-card-header"),a.TgZ(17,"mat-card-title"),a._uU(18," Internet "),a.qZA(),a.qZA(),a.TgZ(19,"mat-card-header"),a.TgZ(20,"mat-card-title"),a._uU(21," Disponibilidad "),a.qZA(),a.qZA(),a.TgZ(22,"mat-card-header"),a.TgZ(23,"mat-card-title"),a._uU(24," Detalles "),a.qZA(),a.qZA(),a.qZA(),a.YNc(25,Pe,1,1,"app-orders-motorizado",4)),2&t&&(a.xp6(4),a.Q6J("usePanning",!0)("latitude",e.currentLat)("longitude",e.currentLong)("zoom",10),a.xp6(1),a.Q6J("ngForOf",e.listMotorizados),a.xp6(20),a.Q6J("ngForOf",e.listMotorizados))},directives:[q.SA,n.sg,Ae.dk,Ae.n5,q.pt,q.d,Ae.kc,we],styles:[".mat-form-field[_ngcontent-%COMP%] + .mat-form-field[_ngcontent-%COMP%]{margin-left:8px}agm-map[_ngcontent-%COMP%]{margin-left:auto!important;margin-right:auto!important;align-self:center!important;height:400px}.mat-expansion-panel[_ngcontent-%COMP%], agm-map[_ngcontent-%COMP%]{width:100%}.avatar-photo[_ngcontent-%COMP%]{height:50px;width:50px}.user-element[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 1fr 1fr 1fr;align-items:center;justify-items:center;padding:10px;background-color:#a8b5c0;border-color:#000}.avatar-photo[_ngcontent-%COMP%]{justify-self:baseline}.info-row[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:200px}.info-row[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2em;padding:10px}.info-col[_ngcontent-%COMP%], .info-row[_ngcontent-%COMP%]{display:flex}.info-col[_ngcontent-%COMP%]{flex-direction:column;align-content:center}.butons-info[_ngcontent-%COMP%]{justify-content:center}.butons-info[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:10px}"]}),t})()},{path:"customersDetails",component:(()=>{class t{constructor(t){this.repoService=t,this._allCostumers="api/client",this.listCostumers=[],this.listLocations=[],this.currentLat=-79.915413,this.currentLong=-.198542,this.getAllCustomers=()=>{this.repoService.getData(this._allCostumers).toPromise().then(t=>{this.listCostumers=t,this.listCostumers.forEach(t=>{null!=t.locations[0]&&this.listLocations.push(t)})})}}ngOnInit(){this.getAllCustomers()}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(s.b))},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-customers"]],decls:27,vars:7,consts:[[3,"usePanning","latitude","longitude","zoom"],[3,"latitude","longitude","markerDraggable",4,"ngFor","ngForOf"],[1,"detalles"],[1,"user-element","header"],[2,"display","none"],["class","user-element",4,"ngFor","ngForOf"],["id","center",4,"ngIf"],[3,"latitude","longitude","markerDraggable"],["infoWindow",""],[1,"user-element"],["id","center"]],template:function(t,e){1&t&&(a.TgZ(0,"p"),a._uU(1,"Informaci\xf3n de los clientes"),a.qZA(),a.TgZ(2,"h4"),a._uU(3,"Ubicaci\xf3n en mapa"),a.qZA(),a.TgZ(4,"agm-map",0),a.YNc(5,De,4,5,"agm-marker",1),a.qZA(),a._UZ(6,"br"),a._UZ(7,"br"),a.TgZ(8,"div",2),a.TgZ(9,"h4"),a._uU(10,"Lista"),a.qZA(),a.TgZ(11,"div",3),a.TgZ(12,"mat-card-header"),a.TgZ(13,"mat-card-title"),a._uU(14,"Nombre"),a.qZA(),a.qZA(),a.TgZ(15,"mat-card-header"),a.TgZ(16,"mat-card-title"),a._uU(17," Email "),a.qZA(),a.qZA(),a.TgZ(18,"mat-card-header"),a.TgZ(19,"mat-card-title"),a._uU(20," Ubicaci\xf3n "),a.qZA(),a.qZA(),a.TgZ(21,"mat-card-header"),a.TgZ(22,"mat-card-title"),a._uU(23," C\xe9dula "),a.qZA(),a.qZA(),a.qZA(),a._UZ(24,"mat-card",4),a.YNc(25,ke,13,5,"div",5),a.qZA(),a.YNc(26,Se,2,0,"div",6)),2&t&&(a.xp6(4),a.Q6J("usePanning",!0)("latitude",e.currentLat)("longitude",e.currentLong)("zoom",2),a.xp6(1),a.Q6J("ngForOf",e.listLocations),a.xp6(20),a.Q6J("ngForOf",e.listCostumers),a.xp6(1),a.Q6J("ngIf",0===e.listCostumers.length))},directives:[q.SA,n.sg,Ae.dk,Ae.n5,Ae.a8,n.O5,q.pt,q.d],styles:["p[_ngcontent-%COMP%]{margin-left:50px!important;padding-top:10px;text-align:center}.mat-form-field[_ngcontent-%COMP%] + .mat-form-field[_ngcontent-%COMP%]{margin-left:8px}agm-map[_ngcontent-%COMP%]{margin-left:auto!important;margin-right:auto!important;align-self:center!important;height:400px;width:100%}.user-element[_ngcontent-%COMP%]{display:grid;grid-template-columns:1.5fr 1.2fr 1fr 1fr;align-items:center;justify-items:center;padding:10px;margin-left:50px;margin-right:50px;background-color:#f7fafc;border:.25px solid #dadada}.header[_ngcontent-%COMP%]{background-color:#6b2657!important;color:#fff!important;align-items:center!important;justify-items:center!important}.detalles[_ngcontent-%COMP%]{width:100%}h4[_ngcontent-%COMP%]{text-align:center}"]}),t})()},{path:"listlocals",component:(()=>{class t{constructor(t){this.repoService=t,this._allLocals="api/local",this.listLocals=[],this.getAllLocals=()=>{this.repoService.getData(this._allLocals).toPromise().then(t=>{this.listLocals=t})}}ngOnInit(){this.getAllLocals()}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(s.b))},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-local-list"]],decls:18,vars:2,consts:[[1,"tittle"],[1,"user-element","header"],[2,"display","none"],["class","user-element",4,"ngFor","ngForOf"],["id","center",4,"ngIf"],[1,"user-element"],[1,"avatar-photo"],["mat-card-avatar","",3,"src"],["id","center"]],template:function(t,e){1&t&&(a.TgZ(0,"p",0),a._uU(1,"Lista de locales"),a.qZA(),a.TgZ(2,"div",1),a.TgZ(3,"mat-card-header"),a.TgZ(4,"mat-card-title"),a._uU(5," Nombre Local "),a.qZA(),a.qZA(),a.TgZ(6,"mat-card-header"),a.TgZ(7,"mat-card-title"),a._uU(8," RUC "),a.qZA(),a.qZA(),a.TgZ(9,"mat-card-header"),a.TgZ(10,"mat-card-title"),a._uU(11," Ubicaci\xf3n "),a.qZA(),a.qZA(),a.TgZ(12,"mat-card-header"),a.TgZ(13,"mat-card-title"),a._uU(14," Correo "),a.qZA(),a.qZA(),a.qZA(),a._UZ(15,"mat-card",2),a.YNc(16,Ne,16,5,"div",3),a.YNc(17,je,2,0,"div",4)),2&t&&(a.xp6(16),a.Q6J("ngForOf",e.listLocals),a.xp6(1),a.Q6J("ngIf",0===e.listLocals.length))},directives:[Ae.dk,Ae.n5,Ae.a8,n.sg,n.O5,Ae.kc,Ae.$j],styles:["table[_ngcontent-%COMP%]{padding:35px;border:35vh;margin:1vh;width:100%;overflow-x:auto;overflow-y:hidden;min-width:500px;max-width:100%}th.mat-header-cell[_ngcontent-%COMP%]{text-align:left;max-width:50%;text-align:center!important}p[_ngcontent-%COMP%]{margin-left:50px!important;padding-top:10px;text-align:center}.avatar-photo[_ngcontent-%COMP%]{padding:10px;justify-self:baseline}.header[_ngcontent-%COMP%]{background-color:#6b2657!important;color:#fff!important;align-items:center!important;justify-items:center!important}.user-element[_ngcontent-%COMP%]{display:grid;grid-template-columns:1.5fr .9fr 1.2fr 1.25fr;align-items:center;justify-items:center;padding:10px;margin-left:50px;margin-right:50px;background-color:#f7fafc;border:.25px solid #dadada}.row[_ngcontent-%COMP%]{width:75vh;margin-left:50px!important;margin-right:50px!important}.edit[_ngcontent-%COMP%]{margin:5px}*[_ngcontent-%COMP%]{text-align:center}.button-container[_ngcontent-%COMP%]{display:flex;justify-content:center;margin:10px;padding:10px}.tittle[_ngcontent-%COMP%]{padding-right:25px}"]}),t})()}]}];let Ye=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.oAB({type:t}),t.\u0275inj=a.cJS({imports:[[o.Bz.forChild(ze)],o.Bz]}),t})();var $e=i(2542);i(4762);let Re=(()=>{let t=class{};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.oAB({type:t}),t.\u0275inj=a.cJS({imports:[[n.ez]]}),t})();var Le=i(552),Ee=i(7441),Je=i(8295);let Fe=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.oAB({type:t}),t.\u0275inj=a.cJS({imports:[[n.ez,Z.SJ,Ye,g.Ps,p.t,u.Tx,d.g0,l.ot,_.Nh,fe.To,f.p0,A.IJ,m.ie,$e.vV,Re,Ee.LD,Je.lN,q.su.forRoot({apiKey:"AIzaSyBHEIRG5sYxESIrlMyq664B6HT3fVw7Wxg"}),dt.u5,Ae.QW,Le.HT],f.p0]}),t})()}}]);